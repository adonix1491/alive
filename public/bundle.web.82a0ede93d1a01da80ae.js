(self.webpackChunkAliveApp=self.webpackChunkAliveApp||[]).push([[922],{291(e,t,n){var r=n(4994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(9293)),l=r(n(5715)),o=function(e){if("function"==typeof WeakMap){var t=new WeakMap;new WeakMap}return function(e){if(e&&e.__esModule)return e;var n,r,a={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return a;if(n=t){if(n.has(e))return n.get(e);n.set(e,a)}for(var l in e)"default"!==l&&{}.hasOwnProperty.call(e,l)&&((r=(n=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,l))&&(r.get||r.set)?n(a,l,r):a[l]=e[l]);return a}(e)}(n(6540)),i=r(n(9176)),d=r(n(8506)),s=r(n(8997)),u=r(n(8444)),c=r(n(4650)),f=r(n(5782)),S=r(n(4081)),g=r(n(4951)),h=r(n(2869)),O=n(2929),y=n(1858),m=n(6513),p=n(7361),C=n(4848),x=s.default.create({container:{flex:1},header:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",paddingHorizontal:y.SPACING.lg,paddingTop:y.SPACING.lg,paddingBottom:y.SPACING.md},backButton:{padding:y.SPACING.sm},backIcon:{fontSize:y.FONTS.size.xxl,color:y.COLORS.textPrimary},headerTitle:{fontSize:y.FONTS.size.xl,fontWeight:y.FONTS.bold,color:y.COLORS.textPrimary},content:{flex:1,padding:y.SPACING.lg},loadingContainer:{flex:1,justifyContent:"center",alignItems:"center"},section:{marginBottom:y.SPACING.xxl},sectionHeader:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",marginBottom:y.SPACING.sm},sectionTitle:{fontSize:y.FONTS.size.lg,fontWeight:y.FONTS.bold,color:y.COLORS.textPrimary,marginBottom:y.SPACING.sm},card:Object.assign({backgroundColor:y.COLORS.white,borderRadius:y.RADIUS.md,padding:y.SPACING.md},y.SHADOWS.sm),messageText:{fontSize:y.FONTS.size.md,color:y.COLORS.textPrimary,lineHeight:24},placeholderText:{color:y.COLORS.textSecondary,fontStyle:"italic"},hintText:{fontSize:y.FONTS.size.sm,color:y.COLORS.textSecondary,marginTop:y.SPACING.xs},input:Object.assign({backgroundColor:y.COLORS.white,borderRadius:y.RADIUS.md,padding:y.SPACING.md,height:120,fontSize:y.FONTS.size.md,borderWidth:1,borderColor:y.COLORS.primary},y.SHADOWS.sm),editLink:{color:y.COLORS.primary,fontSize:y.FONTS.size.md,fontWeight:y.FONTS.bold},saveLink:{color:y.COLORS.success,fontSize:y.FONTS.size.md,fontWeight:y.FONTS.bold}});t.default=function(){var e=(0,m.useNavigation)(),t=(0,o.useState)("æˆ‘é•·æ™‚é–“æœªç°½åˆ°ï¼Œå¯èƒ½ç™¼ç”Ÿæ„å¤–ï¼Œè«‹å˜—è©¦è¯ç¹«æˆ‘æˆ–å”åŠ©ç¢ºèªæˆ‘çš„å®‰å…¨ã€‚"),n=(0,l.default)(t,2),r=n[0],s=(n[1],(0,o.useState)("")),N=(0,l.default)(s,2),T=N[0],b=N[1],I=(0,o.useState)(!1),j=(0,l.default)(I,2),v=j[0],A=j[1],P=(0,o.useState)(!1),R=(0,l.default)(P,2),L=R[0],_=R[1],E=(0,o.useState)(!1),k=(0,l.default)(E,2),z=k[0],w=k[1];o.default.useEffect(function(){G()},[]);var B,F,G=(B=(0,a.default)(function*(){_(!0);try{var e=yield p.messageService.getTemplates(),t=e.data,n=e.error;if(null!=t&&t.templates){var r=t.templates.find(function(e){return"custom"===e.type});r&&b(r.content)}else n&&console.log("Load templates error:",n)}catch(e){console.error(e)}finally{_(!1)}}),function(){return B.apply(this,arguments)}),D=(F=(0,a.default)(function*(){if(T.trim()){w(!0);var e=yield p.messageService.saveTemplate({type:"custom",content:T.trim()}),t=e.data,n=e.error;w(!1),t?(A(!1),S.default.alert("æˆåŠŸ","è¨Šæ¯æ¨¡æ¿å·²å„²å­˜")):S.default.alert("éŒ¯èª¤",(null==n?void 0:n.message)||"å„²å­˜å¤±æ•—")}else S.default.alert("æç¤º","è«‹è¼¸å…¥å…§å®¹")}),function(){return F.apply(this,arguments)});return(0,C.jsx)(O.GradientBackground,{variant:"light",children:(0,C.jsxs)(u.default,{style:x.container,children:[(0,C.jsxs)(i.default,{style:x.header,children:[(0,C.jsx)(c.default,{style:x.backButton,onPress:function(){return e.goBack()},children:(0,C.jsx)(d.default,{style:x.backIcon,children:"â†"})}),(0,C.jsx)(d.default,{style:x.headerTitle,children:"è¨Šæ¯æ¨¡æ¿"}),(0,C.jsx)(i.default,{style:{width:40}})]}),L?(0,C.jsx)(i.default,{style:x.loadingContainer,children:(0,C.jsx)(h.default,{size:"large",color:y.COLORS.primary})}):(0,C.jsxs)(g.default,{style:x.content,children:[(0,C.jsxs)(i.default,{style:x.section,children:[(0,C.jsx)(d.default,{style:x.sectionTitle,children:"é è¨­é€šçŸ¥è¨Šæ¯"}),(0,C.jsx)(i.default,{style:x.card,children:(0,C.jsx)(d.default,{style:x.messageText,children:r})}),(0,C.jsx)(d.default,{style:x.hintText,children:"æ­¤ç‚ºç³»çµ±é è¨­çš„ç·Šæ€¥é€šçŸ¥å…§å®¹ã€‚"})]}),(0,C.jsxs)(i.default,{style:x.section,children:[(0,C.jsxs)(i.default,{style:x.sectionHeader,children:[(0,C.jsx)(d.default,{style:x.sectionTitle,children:"è‡ªè¨‚é€šçŸ¥è¨Šæ¯"}),v?(0,C.jsx)(c.default,{onPress:D,disabled:z,children:(0,C.jsx)(d.default,{style:[x.saveLink,z&&{opacity:.5}],children:z?"å„²å­˜ä¸­...":"å®Œæˆ"})}):(0,C.jsx)(c.default,{onPress:function(){return A(!0)},children:(0,C.jsx)(d.default,{style:x.editLink,children:"ç·¨è¼¯"})})]}),v?(0,C.jsx)(f.default,{style:x.input,value:T,onChangeText:b,multiline:!0,placeholder:"è«‹è¼¸å…¥æ‚¨æƒ³å°ç·Šæ€¥è¯çµ¡äººèªªçš„è©±...",textAlignVertical:"top"}):(0,C.jsx)(i.default,{style:x.card,children:(0,C.jsx)(d.default,{style:[x.messageText,!T&&x.placeholderText],children:T||"é»æ“Šç·¨è¼¯ä»¥è¨­å®šè‡ªè¨‚è¨Šæ¯..."})}),(0,C.jsx)(d.default,{style:x.hintText,children:"è‡ªè¨‚è¨Šæ¯å°‡é™„åŠ åœ¨é è¨­è¨Šæ¯ä¹‹å¾Œç™¼é€ã€‚"})]})]})]})})}},442(e,t,n){var r=n(4994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(n(6540));var a=r(n(9176)),l=r(n(8506)),o=r(n(8997)),i=r(n(4650)),d=n(1858),s=n(4848),u=o.default.create({container:Object.assign({backgroundColor:d.COLORS.cardBackground,borderRadius:d.RADIUS.lg,padding:d.SPACING.lg},d.SHADOWS.sm),content:{flexDirection:"row",alignItems:"center"},iconContainer:{marginRight:d.SPACING.md},textContainer:{flex:1},title:{fontSize:d.FONTS.size.lg,fontWeight:d.FONTS.semiBold,color:d.COLORS.textPrimary},subtitle:{fontSize:d.FONTS.size.md,color:d.COLORS.textSecondary,marginTop:d.SPACING.xs},rightContainer:{marginLeft:d.SPACING.md}});t.default=function(e){var t=e.title,n=e.subtitle,r=e.variant,o=void 0===r?"default":r,c=e.icon,f=e.rightContent,S=e.onPress,g=e.style,h=e.children,O=function(e){switch(e){case"success":return{background:"#E8F5E9",border:d.COLORS.success,text:d.COLORS.success};case"warning":return{background:"#FFF8E1",border:d.COLORS.warning,text:"#F57F17"};case"danger":return{background:"#FFEBEE",border:d.COLORS.danger,text:d.COLORS.danger};case"info":return{background:"#E3F2FD",border:d.COLORS.info,text:"#1565C0"};default:return{background:d.COLORS.cardBackground,border:"transparent",text:d.COLORS.textPrimary}}}(o),y=S?i.default:a.default,m=S?{onPress:S,activeOpacity:.7}:{};return(0,s.jsx)(y,Object.assign({},m,{style:[u.container,{backgroundColor:O.background,borderLeftColor:O.border,borderLeftWidth:"default"!==o?4:0},g],children:(0,s.jsxs)(a.default,{style:u.content,children:[c&&(0,s.jsx)(a.default,{style:u.iconContainer,children:"string"==typeof c?(0,s.jsx)(l.default,{style:{fontSize:24},children:c}):c}),(0,s.jsxs)(a.default,{style:u.textContainer,children:[(0,s.jsx)(l.default,{style:[u.title,{color:O.text}],children:t}),n&&(0,s.jsx)(l.default,{style:u.subtitle,children:n}),h]}),f&&(0,s.jsx)(a.default,{style:u.rightContainer,children:f})]})}))}},1592(e,t,n){var r=n(4994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,l,o,i,d=r(n(9293)),s=r(n(7383)),u=r(n(4579)),c=n(9722),f=r(n(9271)),S=(0,u.default)(function e(){(0,s.default)(this,e)},[{key:"getSettings",value:(i=(0,d.default)(function*(){var e=yield f.default.getToken();return e?(0,c.authenticatedRequest)("/notifications/settings",e,{method:"GET"}):{error:{code:"NO_TOKEN",message:"æœªç™»å…¥"}}}),function(){return i.apply(this,arguments)})},{key:"updateSettings",value:(o=(0,d.default)(function*(e){var t=yield f.default.getToken();return t?(0,c.authenticatedRequest)("/notifications/settings",t,{method:"PUT",body:JSON.stringify(e)}):{error:{code:"NO_TOKEN",message:"æœªç™»å…¥"}}}),function(e){return o.apply(this,arguments)})},{key:"sendEmailVerification",value:(l=(0,d.default)(function*(e){var t=yield f.default.getToken();return t?(0,c.authenticatedRequest)("/notifications/verify-email",t,{method:"POST",body:JSON.stringify({email:e})}):{error:{code:"NO_TOKEN",message:"æœªç™»å…¥"}}}),function(e){return l.apply(this,arguments)})},{key:"confirmEmail",value:(a=(0,d.default)(function*(e){var t=yield f.default.getToken();return t?(0,c.authenticatedRequest)("/notifications/confirm-email",t,{method:"POST",body:JSON.stringify({code:e})}):{error:{code:"NO_TOKEN",message:"æœªç™»å…¥"}}}),function(e){return a.apply(this,arguments)})}]);t.default=new S},1730(e,t,n){var r=n(4994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,l,o=r(n(9293)),i=n(9722),d=r(n(9271)),s={getTemplates:(l=(0,o.default)(function*(){try{var e=yield d.default.getToken();return e?yield(0,i.authenticatedRequest)("/message-templates",e,{method:"GET"}):{error:{code:"UNAUTHORIZED",message:"å°šæœªç™»å…¥"}}}catch(e){return{error:{code:"NETWORK_ERROR",message:e.message}}}}),function(){return l.apply(this,arguments)}),saveTemplate:(a=(0,o.default)(function*(e){try{var t=yield d.default.getToken();return t?yield(0,i.authenticatedRequest)("/message-templates",t,{method:"POST",body:JSON.stringify(e)}):{error:{code:"UNAUTHORIZED",message:"å°šæœªç™»å…¥"}}}catch(e){return{error:{code:"NETWORK_ERROR",message:e.message}}}}),function(e){return a.apply(this,arguments)})};t.default=s},1858(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.SPACING=t.SHADOWS=t.RADIUS=t.FONTS=t.COLORS=t.CHECK_IN_BUTTON=t.ANIMATION=void 0;var n=t.COLORS={primary:"#00B894",primaryLight:"#55EFC4",primaryDark:"#00A884",gradientStart:"#00B894",gradientMiddle:"#55EFC4",gradientEnd:"#81ECEC",success:"#00B894",warning:"#FDCB6E",danger:"#E74C3C",info:"#74B9FF",white:"#FFFFFF",black:"#2D3436",gray100:"#F8F9FA",gray200:"#E9ECEF",gray300:"#DEE2E6",gray400:"#CED4DA",gray500:"#ADB5BD",gray600:"#6C757D",gray700:"#495057",gray800:"#343A40",gray900:"#212529",background:"#F0FFF4",backgroundDark:"#E8F5E9",cardBackground:"#FFFFFF",textPrimary:"#2D3436",textSecondary:"#636E72",textLight:"#B2BEC3",textOnPrimary:"#FFFFFF"},r=t.FONTS={light:"300",regular:"400",medium:"500",semiBold:"600",bold:"700",size:{xs:10,sm:12,md:14,lg:16,xl:18,xxl:20,xxxl:24,title:28,display:32,hero:48},lineHeight:{tight:1.2,normal:1.5,relaxed:1.8}},a=t.SPACING={xs:4,sm:8,md:12,lg:16,xl:20,xxl:24,xxxl:32,huge:48,massive:64},l=t.RADIUS={sm:4,md:8,lg:12,xl:16,xxl:20,round:50,full:9999},o=t.SHADOWS={sm:{shadowColor:n.black,shadowOffset:{width:0,height:1},shadowOpacity:.1,shadowRadius:2,elevation:2},md:{shadowColor:n.black,shadowOffset:{width:0,height:2},shadowOpacity:.15,shadowRadius:4,elevation:4},lg:{shadowColor:n.black,shadowOffset:{width:0,height:4},shadowOpacity:.2,shadowRadius:8,elevation:8},xl:{shadowColor:n.black,shadowOffset:{width:0,height:8},shadowOpacity:.25,shadowRadius:16,elevation:16}},i=t.ANIMATION={fast:150,normal:300,slow:500},d=t.CHECK_IN_BUTTON={size:200,innerSize:180,iconSize:60};t.default={COLORS:n,FONTS:r,SPACING:a,RADIUS:l,SHADOWS:o,ANIMATION:i,CHECK_IN_BUTTON:d}},2449(e,t,n){var r=n(4994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(n(6540));var a=n(6513),l=n(3450),o=n(399),i=n(2868),d=r(n(8506)),s=r(n(9176)),u=r(n(8997)),c=n(1858),f=n(4186),S=n(6210),g=n(4635),h=n(6352),O=r(n(7862)),y=n(4848),m="web"===O.default.OS?(0,o.createStackNavigator)():(0,l.createNativeStackNavigator)(),p=(0,i.createBottomTabNavigator)(),C=function(e){var t=e.focused,n=e.icon,r=e.label;return(0,y.jsxs)(s.default,{style:N.tabIconContainer,children:[(0,y.jsx)(d.default,{style:[N.tabIcon,t&&N.tabIconFocused],children:n}),(0,y.jsx)(d.default,{style:[N.tabLabel,t&&N.tabLabelFocused],children:r})]})},x=function(){return(0,y.jsxs)(p.Navigator,{screenOptions:{headerShown:!1,tabBarStyle:N.tabBar,tabBarShowLabel:!1},children:[(0,y.jsx)(p.Screen,{name:f.ROUTES.HOME,component:S.HomeScreen,options:{tabBarIcon:function(e){var t=e.focused;return(0,y.jsx)(C,{focused:t,icon:"ğŸ ",label:"é¦–é "})}}}),(0,y.jsx)(p.Screen,{name:f.ROUTES.SETTINGS,component:S.SettingsScreen,options:{tabBarIcon:function(e){var t=e.focused;return(0,y.jsx)(C,{focused:t,icon:"âš™ï¸",label:"è¨­ç½®"})}}}),(0,y.jsx)(p.Screen,{name:f.ROUTES.EMERGENCY_CONTACTS,component:S.EmergencyContactsScreen,options:{tabBarIcon:function(e){var t=e.focused;return(0,y.jsx)(C,{focused:t,icon:"ğŸ‘¥",label:"è¯çµ¡äºº"})}}}),(0,y.jsx)(p.Screen,{name:f.ROUTES.PROFILE,component:S.ProfileScreen,options:{tabBarIcon:function(e){var t=e.focused;return(0,y.jsx)(C,{focused:t,icon:"ğŸ‘¤",label:"æˆ‘çš„"})}}})]})},N=u.default.create({tabBar:{backgroundColor:c.COLORS.white,borderTopWidth:0,elevation:10,shadowColor:c.COLORS.black,shadowOffset:{width:0,height:-2},shadowOpacity:.1,shadowRadius:8,height:80,paddingTop:c.SPACING.sm},tabIconContainer:{alignItems:"center",justifyContent:"center"},tabIcon:{fontSize:24,marginBottom:c.SPACING.xs},tabIconFocused:{transform:[{scale:1.1}]},tabLabel:{fontSize:c.FONTS.size.xs,color:c.COLORS.textLight},tabLabelFocused:{color:c.COLORS.primary,fontWeight:c.FONTS.semiBold}});t.default=function(){var e=(0,h.useAuth)();return e.isAuthenticated,e.isLoading?null:(0,y.jsx)(a.NavigationContainer,{children:(0,y.jsxs)(m.Navigator,{screenOptions:{headerShown:!1},initialRouteName:f.ROUTES.MAIN,children:[(0,y.jsx)(m.Screen,{name:f.ROUTES.MAIN,component:x}),(0,y.jsx)(m.Screen,{name:f.ROUTES.AUTH,component:g.AuthScreen,options:{presentation:"modal",animation:"slide_from_bottom"}}),(0,y.jsx)(m.Screen,{name:f.ROUTES.ADD_EMERGENCY_CONTACT,component:S.EmergencyContactsScreen,options:{presentation:"modal",animation:"slide_from_bottom"}}),(0,y.jsx)(m.Screen,{name:f.ROUTES.NOTIFICATION_SETTINGS,component:S.NotificationSettingsScreen,options:{animation:"slide_from_right"}}),(0,y.jsx)(m.Screen,{name:f.ROUTES.MESSAGE_TEMPLATES,component:S.MessageTemplatesScreen,options:{animation:"slide_from_right"}}),(0,y.jsx)(m.Screen,{name:f.ROUTES.ANOMALY_RULES,component:S.AnomalyRulesScreen,options:{animation:"slide_from_right"}})]})})}},2929(e,t,n){var r=n(4994);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"CheckInButton",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"GradientBackground",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"StatusCard",{enumerable:!0,get:function(){return l.default}});var a=r(n(7699)),l=r(n(442)),o=r(n(8776))},3687(e,t,n){var r=n(4994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(1132)),l=r(n(9293)),o=r(n(5715)),i=function(e){if("function"==typeof WeakMap){var t=new WeakMap;new WeakMap}return function(e){if(e&&e.__esModule)return e;var n,r,a={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return a;if(n=t){if(n.has(e))return n.get(e);n.set(e,a)}for(var l in e)"default"!==l&&{}.hasOwnProperty.call(e,l)&&((r=(n=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,l))&&(r.get||r.set)?n(a,l,r):a[l]=e[l]);return a}(e)}(n(6540)),d=r(n(9176)),s=r(n(8506)),u=r(n(8997)),c=r(n(7061)),f=r(n(8444)),S=r(n(4650)),g=r(n(7043)),h=r(n(4081)),O=r(n(5782)),y=r(n(2869)),m=r(n(6430)),p=n(2929),C=n(1858),x=n(7361),N=n(6513),T=n(4848),b=u.default.create({container:{flex:1},header:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",paddingHorizontal:C.SPACING.lg,paddingTop:C.SPACING.lg,paddingBottom:C.SPACING.xl},backButton:{padding:C.SPACING.sm},backIcon:{fontSize:C.FONTS.size.xxl,color:C.COLORS.white},headerTitle:{fontSize:C.FONTS.size.xl,fontWeight:C.FONTS.bold,color:C.COLORS.white},addButton:{width:36,height:36,borderRadius:18,backgroundColor:C.COLORS.warning,alignItems:"center",justifyContent:"center"},addIcon:{fontSize:C.FONTS.size.xl,color:C.COLORS.black,fontWeight:C.FONTS.bold},listContent:{paddingHorizontal:C.SPACING.lg,paddingBottom:C.SPACING.xxxl},contactCard:Object.assign({flexDirection:"row",alignItems:"center",justifyContent:"space-between",backgroundColor:C.COLORS.cardBackground,borderRadius:C.RADIUS.lg,padding:C.SPACING.lg,marginBottom:C.SPACING.md},C.SHADOWS.sm),contactInfo:{flexDirection:"row",alignItems:"center",flex:1},contactIcon:{width:44,height:44,borderRadius:22,backgroundColor:C.COLORS.primary,alignItems:"center",justifyContent:"center",marginRight:C.SPACING.md},contactIconText:{fontSize:C.FONTS.size.lg,fontWeight:C.FONTS.bold,color:C.COLORS.white},contactDetails:{flex:1},contactName:{fontSize:C.FONTS.size.lg,fontWeight:C.FONTS.semiBold,color:C.COLORS.textPrimary},contactMeta:{marginTop:C.SPACING.xs},contactPhone:{fontSize:C.FONTS.size.sm,color:C.COLORS.textSecondary},contactLine:{fontSize:C.FONTS.size.sm,color:C.COLORS.success,marginTop:2},disabledLabel:{fontSize:C.FONTS.size.xs,color:C.COLORS.danger,marginTop:C.SPACING.xs},contactActions:{flexDirection:"row",alignItems:"center",gap:C.SPACING.md},deleteButton:{padding:C.SPACING.xs},deleteIcon:{fontSize:18},emptyContainer:{alignItems:"center",paddingTop:C.SPACING.huge},emptyText:{fontSize:C.FONTS.size.lg,color:C.COLORS.white,marginBottom:C.SPACING.sm},emptyHint:{fontSize:C.FONTS.size.md,color:C.COLORS.gray300},modalOverlay:{position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",justifyContent:"center",alignItems:"center",padding:C.SPACING.lg},modalContainer:Object.assign({backgroundColor:C.COLORS.white,borderRadius:C.RADIUS.lg,padding:C.SPACING.xl,width:"100%",maxWidth:400},C.SHADOWS.lg),modalTitle:{fontSize:C.FONTS.size.xl,fontWeight:C.FONTS.bold,color:C.COLORS.textPrimary,marginBottom:C.SPACING.lg,textAlign:"center"},inputLabel:{fontSize:C.FONTS.size.sm,color:C.COLORS.textSecondary,marginBottom:C.SPACING.xs,marginTop:C.SPACING.md},input:{backgroundColor:C.COLORS.background,borderRadius:C.RADIUS.md,padding:C.SPACING.md,borderWidth:1,borderColor:C.COLORS.gray200,fontSize:C.FONTS.size.md},modalButtons:{flexDirection:"row",justifyContent:"space-between",marginTop:C.SPACING.xl,gap:C.SPACING.md},modalButton:{flex:1,paddingVertical:C.SPACING.md,borderRadius:C.RADIUS.md,alignItems:"center"},cancelButton:{backgroundColor:C.COLORS.gray100},saveButton:{backgroundColor:C.COLORS.primary},cancelButtonText:{color:C.COLORS.textPrimary,fontWeight:C.FONTS.medium},saveButtonText:{color:C.COLORS.white,fontWeight:C.FONTS.bold}});t.default=function(){var e=(0,N.useNavigation)(),t=(0,i.useState)([]),n=(0,o.default)(t,2),r=n[0],u=n[1],I=(0,i.useState)(!1),j=(0,o.default)(I,2),v=j[0],A=j[1],P=(0,i.useState)(!1),R=(0,o.default)(P,2),L=R[0],_=R[1],E=(0,i.useState)(null),k=(0,o.default)(E,2),z=k[0],w=k[1],B=(0,i.useState)(""),F=(0,o.default)(B,2),G=F[0],D=F[1],M=(0,i.useState)(""),W=(0,o.default)(M,2),H=W[0],U=W[1],V=(0,i.useState)(""),K=(0,o.default)(V,2),Y=K[0],q=K[1],$=(0,i.useState)(!1),J=(0,o.default)($,2),X=J[0],Z=J[1],Q=(0,i.useCallback)((0,l.default)(function*(){A(!0);try{var e=yield x.contactsService.getAll();e.data&&u(e.data.contacts)}catch(e){console.error("Failed to load contacts:",e),h.default.alert("éŒ¯èª¤","è¼‰å…¥è¯çµ¡äººå¤±æ•—")}finally{A(!1)}}),[]);(0,i.useEffect)(function(){Q()},[Q]);var ee,te,ne=(ee=(0,l.default)(function*(e){var t=(0,a.default)(r);u(function(t){return t.map(function(t){return t.id===e.id?Object.assign({},t,{isEnabled:!t.isEnabled}):t})});try{yield x.contactsService.update(e.id,{isEnabled:!e.isEnabled})}catch(e){u(t),h.default.alert("éŒ¯èª¤","æ›´æ–°ç‹€æ…‹å¤±æ•—")}}),function(e){return ee.apply(this,arguments)}),re=(te=(0,l.default)(function*(){if(G.trim())if(H.trim()||Y.trim()){Z(!0);try{var e={name:G,phone:H,lineId:Y};if(z){var t=yield x.contactsService.update(z.id,e);if(t.error)throw new Error(t.error.message)}else{var n=yield x.contactsService.create(Object.assign({},e,{priority:r.length+1}));if(n.error)throw new Error(n.error.message)}_(!1),Q()}catch(e){h.default.alert("éŒ¯èª¤",e.message||"æ“ä½œå¤±æ•—")}finally{Z(!1)}}else h.default.alert("éŒ¯èª¤","é›»è©± æˆ– LINE ID è«‹è‡³å°‘å¡«å¯«é€™å…©é …ä¹‹ä¸€");else h.default.alert("éŒ¯èª¤","å§“åç‚ºå¿…å¡«")}),function(){return te.apply(this,arguments)});return(0,T.jsx)(p.GradientBackground,{variant:"primary",children:(0,T.jsxs)(f.default,{style:b.container,children:[(0,T.jsxs)(d.default,{style:b.header,children:[(0,T.jsx)(S.default,{style:b.backButton,onPress:function(){return e.goBack()},children:(0,T.jsx)(s.default,{style:b.backIcon,children:"â†"})}),(0,T.jsx)(s.default,{style:b.headerTitle,children:"ç·Šæ€¥è¯çµ¡äºº"}),(0,T.jsx)(S.default,{style:b.addButton,onPress:function(){w(null),D(""),U(""),q(""),_(!0)},children:(0,T.jsx)(s.default,{style:b.addIcon,children:"ï¼‹"})})]}),v&&0===r.length?(0,T.jsx)(y.default,{size:"large",color:C.COLORS.white,style:{marginTop:50}}):(0,T.jsx)(c.default,{data:r,renderItem:function(e){var t=e.item;return(0,T.jsxs)(S.default,{style:b.contactCard,onPress:function(){return w(e=t),D(e.name),U(e.phone),q(e.lineId||""),void _(!0);var e},activeOpacity:.7,children:[(0,T.jsxs)(d.default,{style:b.contactInfo,children:[(0,T.jsx)(d.default,{style:b.contactIcon,children:(0,T.jsx)(s.default,{style:b.contactIconText,children:t.name.charAt(0)})}),(0,T.jsxs)(d.default,{style:b.contactDetails,children:[(0,T.jsx)(s.default,{style:b.contactName,children:t.name}),(0,T.jsxs)(d.default,{style:b.contactMeta,children:[!!t.phone&&(0,T.jsxs)(s.default,{style:b.contactPhone,children:["ğŸ“ ",t.phone]}),!!t.lineId&&(0,T.jsxs)(s.default,{style:b.contactLine,children:["ğŸ’¬ ",t.lineId]})]}),!t.isEnabled&&(0,T.jsx)(s.default,{style:b.disabledLabel,children:"å·²åœç”¨"})]})]}),(0,T.jsxs)(d.default,{style:b.contactActions,children:[(0,T.jsx)(g.default,{value:t.isEnabled,onValueChange:function(){return ne(t)},trackColor:{false:C.COLORS.gray300,true:C.COLORS.primaryLight},thumbColor:t.isEnabled?C.COLORS.primary:C.COLORS.gray400}),(0,T.jsx)(S.default,{style:b.deleteButton,onPress:function(){return e=t.id,void h.default.alert("ç¢ºèªåˆªé™¤","ç¢ºå®šè¦åˆªé™¤æ­¤ç·Šæ€¥è¯çµ¡äººå—ï¼Ÿ",[{text:"å–æ¶ˆ",style:"cancel"},{text:"åˆªé™¤",style:"destructive",onPress:(n=(0,l.default)(function*(){try{A(!0),yield x.contactsService.delete(e),yield Q()}catch(e){h.default.alert("éŒ¯èª¤","åˆªé™¤å¤±æ•—"),A(!1)}}),function(){return n.apply(this,arguments)})}]);var e,n},children:(0,T.jsx)(s.default,{style:b.deleteIcon,children:"ğŸ—‘ï¸"})})]})]})},keyExtractor:function(e){return String(e.id)},contentContainerStyle:b.listContent,showsVerticalScrollIndicator:!1,ListEmptyComponent:(0,T.jsxs)(d.default,{style:b.emptyContainer,children:[(0,T.jsx)(s.default,{style:b.emptyText,children:"å°šæœªè¨­å®šç·Šæ€¥è¯çµ¡äºº"}),(0,T.jsx)(s.default,{style:b.emptyHint,children:"é»æ“Šå³ä¸Šè§’ ï¼‹ æ·»åŠ è¯çµ¡äºº"})]})}),(0,T.jsx)(m.default,{visible:L,transparent:!0,animationType:"fade",onRequestClose:function(){return _(!1)},children:(0,T.jsx)(d.default,{style:b.modalOverlay,children:(0,T.jsxs)(d.default,{style:b.modalContainer,children:[(0,T.jsx)(s.default,{style:b.modalTitle,children:z?"ç·¨è¼¯è¯çµ¡äºº":"æ–°å¢è¯çµ¡äºº"}),(0,T.jsx)(s.default,{style:b.inputLabel,children:"å§“å *"}),(0,T.jsx)(O.default,{style:b.input,value:G,onChangeText:D,placeholder:"è«‹è¼¸å…¥å§“å"}),(0,T.jsx)(s.default,{style:b.inputLabel,children:"é›»è©±"}),(0,T.jsx)(O.default,{style:b.input,value:H,onChangeText:U,placeholder:"è«‹è¼¸å…¥é›»è©±è™Ÿç¢¼",keyboardType:"phone-pad"}),(0,T.jsx)(s.default,{style:b.inputLabel,children:"LINE ID"}),(0,T.jsx)(O.default,{style:b.input,value:Y,onChangeText:q,placeholder:"è«‹è¼¸å…¥ LINE ID (é¸å¡«)",autoCapitalize:"none"}),(0,T.jsxs)(d.default,{style:b.modalButtons,children:[(0,T.jsx)(S.default,{style:[b.modalButton,b.cancelButton],onPress:function(){return _(!1)},children:(0,T.jsx)(s.default,{style:b.cancelButtonText,children:"å–æ¶ˆ"})}),(0,T.jsx)(S.default,{style:[b.modalButton,b.saveButton],onPress:re,disabled:X,children:X?(0,T.jsx)(y.default,{color:C.COLORS.white}):(0,T.jsx)(s.default,{style:b.saveButtonText,children:"å„²å­˜"})})]})]})})})]})})}},3922(e,t,n){var r=n(4994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(9293)),l=r(n(5715));n(5714);var o=function(e){if("function"==typeof WeakMap){var t=new WeakMap;new WeakMap}return function(e){if(e&&e.__esModule)return e;var n,r,a={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return a;if(n=t){if(n.has(e))return n.get(e);n.set(e,a)}for(var l in e)"default"!==l&&{}.hasOwnProperty.call(e,l)&&((r=(n=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,l))&&(r.get||r.set)?n(a,l,r):a[l]=e[l]);return a}(e)}(n(6540)),i=r(n(7576)),d=r(n(9176)),s=r(n(8506)),u=r(n(8997)),c=r(n(2869)),f=n(6623),S=n(1858),g=n(4186),h=n(6352),O=n(4848),y=u.default.create({splashContainer:{flex:1,backgroundColor:S.COLORS.primary,alignItems:"center",justifyContent:"center"},logoContainer:{alignItems:"center",marginBottom:60},logoEmoji:{fontSize:80,marginBottom:20},appName:{fontSize:S.FONTS.size.display,fontWeight:S.FONTS.bold,color:S.COLORS.white,marginBottom:8},slogan:{fontSize:S.FONTS.size.lg,color:S.COLORS.white,opacity:.8,marginBottom:8},loader:{marginTop:20},errorText:{fontSize:S.FONTS.size.md,color:S.COLORS.danger,textAlign:"center",paddingHorizontal:40}});t.default=function(){var e=(0,o.useState)(!1),t=(0,l.default)(e,2),n=t[0],r=t[1],u=(0,o.useState)(null),m=(0,l.default)(u,2),p=m[0],C=m[1];return(0,o.useEffect)(function(){var e,t=(e=(0,a.default)(function*(){try{yield new Promise(function(e){return setTimeout(e,1e3)}),r(!0)}catch(e){console.error("åˆå§‹åŒ–å¤±æ•—:",e),C(e.message||"æ‡‰ç”¨ç¨‹å¼åˆå§‹åŒ–å¤±æ•—")}}),function(){return e.apply(this,arguments)});t()},[]),n?(0,O.jsxs)(h.AuthProvider,{children:[(0,O.jsx)(i.default,{barStyle:"dark-content",backgroundColor:"transparent",translucent:!0}),(0,O.jsx)(f.AppNavigator,{})]}):(0,O.jsxs)(d.default,{style:y.splashContainer,children:[(0,O.jsx)(i.default,{barStyle:"light-content",backgroundColor:S.COLORS.primary}),(0,O.jsxs)(d.default,{style:y.logoContainer,children:[(0,O.jsx)(s.default,{style:y.logoEmoji,children:"ğŸ˜Š"}),(0,O.jsx)(s.default,{style:y.appName,children:g.APP_INFO.NAME}),(0,O.jsx)(s.default,{style:y.slogan,children:g.APP_INFO.SLOGAN})]}),p?(0,O.jsx)(s.default,{style:y.errorText,children:p}):(0,O.jsx)(c.default,{size:"large",color:S.COLORS.white,style:y.loader})]})}},4186(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.STORAGE_KEYS=t.ROUTES=t.NOTIFICATION_CHANNELS=t.FIREBASE_COLLECTIONS=t.EMERGENCY_CONTACT_LIMITS=t.DEFAULT_MESSAGE_TEMPLATES=t.DEFAULT_CHECK_IN_SETTINGS=t.APP_INFO=void 0;var n=t.APP_INFO={NAME:"ALIVEæ„›ä¾†",VERSION:"1.0.0",BUILD_NUMBER:1,SLOGAN:"æ¯æ—¥ä¸€é–‹ï¼Œå¹³å®‰å·²é”",DESCRIPTION:"è®“é—œå¿ƒæ‚¨çš„äººçŸ¥é“æ‚¨å¹³å®‰"},r=t.DEFAULT_CHECK_IN_SETTINGS={INTERVAL_DAYS:2,GRACE_HOURS:4,REMINDER_TIME:"09:00"},a=t.EMERGENCY_CONTACT_LIMITS={MAX_CONTACTS:5,MIN_CONTACTS:1},l=t.DEFAULT_MESSAGE_TEMPLATES={CHECK_IN:{title:"å¹³å®‰å ±åˆ°",content:"æˆ‘æ˜¯ [å§“å]ï¼Œæˆ‘å¾ˆå¥½ï¼Œä»Šå¤©å·²å®Œæˆç°½åˆ°ã€‚"},EMERGENCY:{title:"ç·Šæ€¥æé†’",content:"æˆ‘æ˜¯ [å§“å]ï¼Œæˆ‘å·²ç¶“é€£çºŒ [å¤©æ•¸] å¤©æ²’æœ‰æ´»å‹•äº†ï¼Œå¿«ä¾†æª¢æŸ¥ä¸‹æˆ‘çš„èº«é«”ç‹€æ…‹ã€‚"},REMINDER:{title:"ç°½åˆ°æé†’",content:"æ‚¨ä»Šå¤©é‚„æ²’æœ‰ç°½åˆ°ï¼Œè«‹è¨˜å¾—æ‰“é–‹ ALIVEæ„›ä¾† å ±å¹³å®‰ã€‚"}},o=t.NOTIFICATION_CHANNELS={LINE:{id:"line",name:"LINE Notify",icon:"chatbubble-ellipses",description:"é€é LINE æ¥æ”¶é€šçŸ¥"},EMAIL:{id:"email",name:"Email",icon:"mail",description:"é€éé›»å­éƒµä»¶æ¥æ”¶é€šçŸ¥"},SMS:{id:"sms",name:"ç°¡è¨Š",icon:"chatbox",description:"é€éç°¡è¨Šæ¥æ”¶é€šçŸ¥"},PUSH:{id:"push",name:"æ¨æ’­é€šçŸ¥",icon:"notifications",description:"é€é APP æ¨æ’­æ¥æ”¶é€šçŸ¥"}},i=t.STORAGE_KEYS={USER_TOKEN:"@alive_user_token",USER_DATA:"@alive_user_data",CHECK_IN_SETTINGS:"@alive_checkin_settings",NOTIFICATION_SETTINGS:"@alive_notification_settings",LAST_CHECK_IN:"@alive_last_checkin",ONBOARDING_COMPLETED:"@alive_onboarding_completed"},d=t.FIREBASE_COLLECTIONS={USERS:"users",CHECK_INS:"check_ins",EMERGENCY_CONTACTS:"emergency_contacts",MESSAGE_TEMPLATES:"message_templates",ANOMALY_RULES:"anomaly_rules",NOTIFICATIONS:"notifications"},s=t.ROUTES={SPLASH:"Splash",AUTH:"Auth",LOGIN:"Login",REGISTER:"Register",MAIN:"Main",HOME:"Home",SETTINGS:"Settings",EMERGENCY_CONTACTS:"EmergencyContacts",ADD_EMERGENCY_CONTACT:"AddEmergencyContact",NOTIFICATION_SETTINGS:"NotificationSettings",MESSAGE_TEMPLATES:"MessageTemplates",ANOMALY_RULES:"AnomalyRules",PROFILE:"Profile"};t.default={APP_INFO:n,DEFAULT_CHECK_IN_SETTINGS:r,EMERGENCY_CONTACT_LIMITS:a,DEFAULT_MESSAGE_TEMPLATES:l,NOTIFICATION_CHANNELS:o,STORAGE_KEYS:i,FIREBASE_COLLECTIONS:d,ROUTES:s}},4635(e,t,n){var r=n(4994);Object.defineProperty(t,"__esModule",{value:!0}),t.AuthScreen=void 0;var a=r(n(9293)),l=r(n(5715)),o=function(e){if("function"==typeof WeakMap){var t=new WeakMap;new WeakMap}return function(e){if(e&&e.__esModule)return e;var n,r,a={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return a;if(n=t){if(n.has(e))return n.get(e);n.set(e,a)}for(var l in e)"default"!==l&&{}.hasOwnProperty.call(e,l)&&((r=(n=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,l))&&(r.get||r.set)?n(a,l,r):a[l]=e[l]);return a}(e)}(n(6540)),i=r(n(9176)),d=r(n(8506)),s=r(n(5782)),u=r(n(4650)),c=r(n(8997)),f=r(n(2869)),S=r(n(5470)),g=r(n(7862)),h=r(n(4951)),O=r(n(4081)),y=n(1858),m=n(6352),p=n(4848);t.AuthScreen=function(){var e,t,n=(0,m.useAuth)(),r=n.login,c=n.register,x=(0,o.useState)(!0),N=(0,l.default)(x,2),T=N[0],b=N[1],I=(0,o.useState)(!1),j=(0,l.default)(I,2),v=j[0],A=j[1],P=(0,o.useState)(""),R=(0,l.default)(P,2),L=R[0],_=R[1],E=(0,o.useState)(""),k=(0,l.default)(E,2),z=k[0],w=k[1],B=(0,o.useState)(""),F=(0,l.default)(B,2),G=F[0],D=F[1],M=(0,o.useState)(""),W=(0,l.default)(M,2),H=W[0],U=W[1],V=(e=(0,a.default)(function*(){if(L&&z){A(!0);var e=yield r(L,z);A(!1),e.success||O.default.alert("ç™»å…¥å¤±æ•—",e.error||"è«‹æª¢æŸ¥æ‚¨çš„å¸³è™Ÿå¯†ç¢¼")}else O.default.alert("éŒ¯èª¤","è«‹è¼¸å…¥ Email å’Œå¯†ç¢¼")}),function(){return e.apply(this,arguments)}),K=(t=(0,a.default)(function*(){if(L&&z&&G)if(z.length<8)O.default.alert("éŒ¯èª¤","å¯†ç¢¼å¿…é ˆè‡³å°‘ 8 å€‹å­—å…ƒ");else{A(!0);var e=yield c(L,z,G,H);A(!1),e.success||O.default.alert("è¨»å†Šå¤±æ•—",e.error||"è«‹ç¨å¾Œå†è©¦")}else O.default.alert("éŒ¯èª¤","è«‹å¡«å¯«æ‰€æœ‰å¿…å¡«æ¬„ä½")}),function(){return t.apply(this,arguments)});return(0,p.jsx)(S.default,{style:C.container,behavior:"ios"===g.default.OS?"padding":void 0,children:(0,p.jsxs)(h.default,{contentContainerStyle:C.scrollContent,children:[(0,p.jsxs)(i.default,{style:C.header,children:[(0,p.jsx)(d.default,{style:C.logo,children:"ğŸ˜Š"}),(0,p.jsx)(d.default,{style:C.title,children:"ALIVE æ„›ä¾†"}),(0,p.jsx)(d.default,{style:C.subtitle,children:"å®‰å…¨ç°½åˆ°ï¼Œå®ˆè­·å½¼æ­¤"})]}),(0,p.jsxs)(i.default,{style:C.form,children:[(0,p.jsx)(d.default,{style:C.formTitle,children:T?"ç™»å…¥":"è¨»å†Š"}),!T&&(0,p.jsx)(s.default,{style:C.input,placeholder:"å§“å",value:G,onChangeText:D,placeholderTextColor:y.COLORS.textSecondary}),(0,p.jsx)(s.default,{style:C.input,placeholder:"Email",value:L,onChangeText:_,keyboardType:"email-address",autoCapitalize:"none",placeholderTextColor:y.COLORS.textSecondary}),(0,p.jsx)(s.default,{style:C.input,placeholder:"å¯†ç¢¼ï¼ˆè‡³å°‘ 8 å€‹å­—å…ƒï¼‰",value:z,onChangeText:w,secureTextEntry:!0,placeholderTextColor:y.COLORS.textSecondary}),!T&&(0,p.jsx)(s.default,{style:C.input,placeholder:"é›»è©±ï¼ˆé¸å¡«ï¼‰",value:H,onChangeText:U,keyboardType:"phone-pad",placeholderTextColor:y.COLORS.textSecondary}),(0,p.jsx)(u.default,{style:[C.button,v&&C.buttonDisabled],onPress:T?V:K,disabled:v,children:v?(0,p.jsx)(f.default,{color:y.COLORS.white}):(0,p.jsx)(d.default,{style:C.buttonText,children:T?"ç™»å…¥":"è¨»å†Š"})}),(0,p.jsx)(u.default,{style:C.switchButton,onPress:function(){b(!T),_(""),w(""),D(""),U("")},children:(0,p.jsxs)(d.default,{style:C.switchText,children:[T?"é‚„æ²’æœ‰å¸³è™Ÿï¼Ÿ":"å·²ç¶“æœ‰å¸³è™Ÿï¼Ÿ",(0,p.jsx)(d.default,{style:C.switchTextBold,children:T?" ç«‹å³è¨»å†Š":" ç™»å…¥"})]})})]})]})})};var C=c.default.create({container:{flex:1,backgroundColor:y.COLORS.background},scrollContent:{flexGrow:1,justifyContent:"center",padding:y.SPACING.xl},header:{alignItems:"center",marginBottom:y.SPACING.xxl},logo:{fontSize:80,marginBottom:y.SPACING.md},title:{fontSize:y.FONTS.size.xxl,fontWeight:y.FONTS.bold,color:y.COLORS.primary,marginBottom:y.SPACING.xs},subtitle:{fontSize:y.FONTS.size.md,color:y.COLORS.textSecondary},form:{width:"100%",maxWidth:400,alignSelf:"center"},formTitle:{fontSize:y.FONTS.size.xl,fontWeight:y.FONTS.bold,color:y.COLORS.textPrimary,marginBottom:y.SPACING.lg,textAlign:"center"},input:{backgroundColor:y.COLORS.white,borderRadius:12,padding:y.SPACING.md,marginBottom:y.SPACING.md,fontSize:y.FONTS.size.md,borderWidth:1,borderColor:y.COLORS.gray200},button:{backgroundColor:y.COLORS.primary,borderRadius:12,padding:y.SPACING.md,alignItems:"center",marginTop:y.SPACING.md},buttonDisabled:{opacity:.6},buttonText:{color:y.COLORS.white,fontSize:y.FONTS.size.md,fontWeight:y.FONTS.semiBold},switchButton:{marginTop:y.SPACING.lg,alignItems:"center"},switchText:{fontSize:y.FONTS.size.md,color:y.COLORS.textSecondary},switchTextBold:{color:y.COLORS.primary,fontWeight:y.FONTS.semiBold}})},4906(e,t,n){var r=n(4994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(9293)),l=r(n(5715)),o=function(e){if("function"==typeof WeakMap){var t=new WeakMap;new WeakMap}return function(e){if(e&&e.__esModule)return e;var n,r,a={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return a;if(n=t){if(n.has(e))return n.get(e);n.set(e,a)}for(var l in e)"default"!==l&&{}.hasOwnProperty.call(e,l)&&((r=(n=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,l))&&(r.get||r.set)?n(a,l,r):a[l]=e[l]);return a}(e)}(n(6540)),i=r(n(9176)),d=r(n(8506)),s=r(n(8997)),u=r(n(4951)),c=r(n(8444)),f=r(n(4650)),S=r(n(5782)),g=r(n(4081)),h=n(2929),O=n(7361),y=n(4186),m=n(1858),p=n(4848),C=s.default.create({container:{flex:1},header:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",padding:m.SPACING.lg},backButton:{padding:m.SPACING.sm},backIcon:{fontSize:24,color:m.COLORS.white},headerTitle:{fontSize:18,color:m.COLORS.white,fontWeight:"bold"},placeholder:{width:40},scrollView:{flex:1},scrollContent:{padding:m.SPACING.lg,paddingBottom:100},section:{marginBottom:m.SPACING.xl},sectionHeader:{flexDirection:"row",alignItems:"center",marginBottom:m.SPACING.sm},sectionIcon:{fontSize:18,marginRight:8},sectionTitle:{fontSize:16,color:m.COLORS.white,fontWeight:"bold"},card:{backgroundColor:m.COLORS.cardBackground,borderRadius:m.RADIUS.lg,padding:m.SPACING.lg},field:{marginBottom:m.SPACING.md},fieldLabel:{color:m.COLORS.textSecondary,marginBottom:4,fontSize:12},input:{backgroundColor:m.COLORS.white,borderRadius:8,padding:12,borderWidth:1,borderColor:"#ddd"},saveButton:{backgroundColor:m.COLORS.black,padding:16,borderRadius:8,alignItems:"center",marginTop:8},saveButtonText:{color:m.COLORS.white,fontWeight:"bold"},contactItem:{backgroundColor:"rgba(255,255,255,0.9)",padding:12,borderRadius:8,marginBottom:8,flexDirection:"row",justifyContent:"space-between",alignItems:"center"},contactName:{fontWeight:"bold",fontSize:16,color:"#333"},contactPhone:{fontSize:14,color:"#666"},deleteButton:{backgroundColor:"#ff4444",paddingHorizontal:12,paddingVertical:6,borderRadius:4},deleteText:{color:"white",fontSize:12}});t.default=function(){var e=(0,o.useState)(y.DEFAULT_CHECK_IN_SETTINGS.INTERVAL_DAYS.toString()),t=(0,l.default)(e,2),n=t[0],r=t[1],s=(0,o.useState)([]),x=(0,l.default)(s,2),N=x[0],T=x[1],b=(0,o.useState)(""),I=(0,l.default)(b,2),j=I[0],v=I[1],A=(0,o.useState)(""),P=(0,l.default)(A,2),R=P[0],L=P[1],_=(0,o.useState)(""),E=(0,l.default)(_,2),k=E[0],z=E[1],w=(0,o.useState)(!1),B=(0,l.default)(w,2),F=B[0],G=B[1];o.default.useEffect(function(){H()},[]);var D,M,W,H=(D=(0,a.default)(function*(){try{var e=yield O.contactsService.getAll();e.data&&T(e.data.contacts)}catch(e){console.error("Load contacts failed:",e)}}),function(){return D.apply(this,arguments)}),U=(M=(0,a.default)(function*(){if(j.trim()&&k.trim())if(N.length>=5)g.default.alert("é™åˆ¶","æœ€å¤šåªèƒ½æ–°å¢ 5 ä½ç·Šæ€¥è¯çµ¡äºº");else{G(!0);try{var e,t=yield O.contactsService.create({name:j,phoneNumber:k,email:R,priority:N.length+1});t.data?(g.default.alert("æˆåŠŸ","è¯çµ¡äººå·²æ–°å¢"),v(""),z(""),L(""),H()):g.default.alert("å¤±æ•—",(null==(e=t.error)?void 0:e.message)||"æ–°å¢å¤±æ•—")}catch(e){g.default.alert("éŒ¯èª¤","é€£ç·šç™¼ç”Ÿå•é¡Œ")}finally{G(!1)}}else g.default.alert("éŒ¯èª¤","è«‹è¼¸å…¥è¯çµ¡äººå§“åå’Œé›»è©±")}),function(){return M.apply(this,arguments)}),V=(W=(0,a.default)(function*(e){try{yield O.contactsService.delete(e),g.default.alert("æˆåŠŸ","è¯çµ¡äººå·²åˆªé™¤"),H()}catch(e){g.default.alert("éŒ¯èª¤","åˆªé™¤å¤±æ•—")}}),function(e){return W.apply(this,arguments)});return(0,p.jsx)(h.GradientBackground,{variant:"primary",children:(0,p.jsxs)(c.default,{style:C.container,children:[(0,p.jsxs)(i.default,{style:C.header,children:[(0,p.jsx)(f.default,{style:C.backButton,children:(0,p.jsx)(d.default,{style:C.backIcon,children:"â†"})}),(0,p.jsx)(d.default,{style:C.headerTitle,children:"è¨­ç½®ä¸­å¿ƒ"}),(0,p.jsx)(i.default,{style:C.placeholder})]}),(0,p.jsxs)(u.default,{style:C.scrollView,contentContainerStyle:C.scrollContent,showsVerticalScrollIndicator:!1,children:[(0,p.jsxs)(i.default,{style:C.section,children:[(0,p.jsxs)(i.default,{style:C.sectionHeader,children:[(0,p.jsx)(d.default,{style:C.sectionIcon,children:"â±ï¸"}),(0,p.jsx)(d.default,{style:C.sectionTitle,children:"ç°½åˆ°æ©Ÿåˆ¶"})]}),(0,p.jsxs)(i.default,{style:C.card,children:[(0,p.jsx)(d.default,{style:C.fieldLabel,children:"æœªç°½åˆ°é€šçŸ¥å¤©æ•¸"}),(0,p.jsx)(S.default,{style:C.input,value:n,onChangeText:r,keyboardType:"numeric",placeholder:"è¼¸å…¥å¤©æ•¸",placeholderTextColor:m.COLORS.textLight})]})]}),(0,p.jsxs)(i.default,{style:C.section,children:[(0,p.jsxs)(i.default,{style:C.sectionHeader,children:[(0,p.jsx)(d.default,{style:C.sectionIcon,children:"ğŸ‘¥"}),(0,p.jsxs)(d.default,{style:C.sectionTitle,children:["å·²å­˜è¯çµ¡äºº (",N.length,"/5)"]})]}),N.map(function(e){return(0,p.jsxs)(i.default,{style:C.contactItem,children:[(0,p.jsxs)(i.default,{children:[(0,p.jsx)(d.default,{style:C.contactName,children:e.name}),(0,p.jsx)(d.default,{style:C.contactPhone,children:e.phoneNumber})]}),(0,p.jsx)(f.default,{onPress:function(){return V(e.id)},style:C.deleteButton,children:(0,p.jsx)(d.default,{style:C.deleteText,children:"åˆªé™¤"})})]},e.id)})]}),(0,p.jsxs)(i.default,{style:C.section,children:[(0,p.jsxs)(i.default,{style:C.sectionHeader,children:[(0,p.jsx)(d.default,{style:C.sectionIcon,children:"â•"}),(0,p.jsx)(d.default,{style:C.sectionTitle,children:"æ–°å¢è¯çµ¡äºº"})]}),(0,p.jsxs)(i.default,{style:C.card,children:[(0,p.jsxs)(i.default,{style:C.field,children:[(0,p.jsx)(d.default,{style:C.fieldLabel,children:"å§“å"}),(0,p.jsx)(S.default,{style:C.input,value:j,onChangeText:v,placeholder:"å§“å",placeholderTextColor:m.COLORS.textLight})]}),(0,p.jsxs)(i.default,{style:C.field,children:[(0,p.jsx)(d.default,{style:C.fieldLabel,children:"é›»è©±"}),(0,p.jsx)(S.default,{style:C.input,value:k,onChangeText:z,placeholder:"é›»è©±",keyboardType:"phone-pad",placeholderTextColor:m.COLORS.textLight})]}),(0,p.jsxs)(i.default,{style:C.field,children:[(0,p.jsx)(d.default,{style:C.fieldLabel,children:"Email (é¸å¡«)"}),(0,p.jsx)(S.default,{style:C.input,value:R,onChangeText:L,placeholder:"Email",keyboardType:"email-address",placeholderTextColor:m.COLORS.textLight})]}),(0,p.jsx)(f.default,{style:C.saveButton,onPress:U,disabled:F,children:(0,p.jsx)(d.default,{style:C.saveButtonText,children:F?"è™•ç†ä¸­...":"æ–°å¢è¯çµ¡äºº"})})]})]})]})]})})}},5764(e,t,n){var r=n(4994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(9293)),l=r(n(5715)),o=function(e){if("function"==typeof WeakMap){var t=new WeakMap;new WeakMap}return function(e){if(e&&e.__esModule)return e;var n,r,a={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return a;if(n=t){if(n.has(e))return n.get(e);n.set(e,a)}for(var l in e)"default"!==l&&{}.hasOwnProperty.call(e,l)&&((r=(n=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,l))&&(r.get||r.set)?n(a,l,r):a[l]=e[l]);return a}(e)}(n(6540)),i=r(n(9176)),d=r(n(8506)),s=r(n(8997)),u=r(n(4951)),c=r(n(8444)),f=r(n(4650)),S=r(n(4081)),g=r(n(5782)),h=r(n(2869)),O=n(2929),y=n(1858),m=n(4186),p=n(6352),C=n(7361),x=n(6513),N=n(4848),T=s.default.create({container:{flex:1},scrollView:{flex:1},scrollContent:{paddingHorizontal:y.SPACING.lg,paddingTop:y.SPACING.xl,paddingBottom:y.SPACING.xxxl},profileCard:Object.assign({backgroundColor:y.COLORS.cardBackground,borderRadius:y.RADIUS.xl,padding:y.SPACING.xl,alignItems:"center",marginBottom:y.SPACING.xl},y.SHADOWS.md),notLoginContainer:{alignItems:"center",padding:y.SPACING.lg},notLoginText:{fontSize:y.FONTS.size.lg,color:y.COLORS.textSecondary,marginBottom:y.SPACING.lg},loginButton:{backgroundColor:y.COLORS.primary,paddingHorizontal:y.SPACING.xl,paddingVertical:y.SPACING.md,borderRadius:y.RADIUS.lg},loginButtonText:{color:y.COLORS.white,fontSize:y.FONTS.size.md,fontWeight:y.FONTS.semiBold},avatarContainer:{position:"relative",marginBottom:y.SPACING.md},avatar:{width:80,height:80,borderRadius:40,backgroundColor:y.COLORS.primary,alignItems:"center",justifyContent:"center"},avatarText:{fontSize:32,fontWeight:y.FONTS.bold,color:y.COLORS.white},editAvatarButton:Object.assign({position:"absolute",bottom:0,right:0,width:28,height:28,borderRadius:14,backgroundColor:y.COLORS.white,alignItems:"center",justifyContent:"center"},y.SHADOWS.sm),editAvatarIcon:{fontSize:14},userName:{fontSize:y.FONTS.size.xxl,fontWeight:y.FONTS.bold,color:y.COLORS.textPrimary,marginBottom:y.SPACING.xs},userEmail:{fontSize:y.FONTS.size.md,color:y.COLORS.textSecondary,marginBottom:y.SPACING.xs},userPhone:{fontSize:y.FONTS.size.md,color:y.COLORS.textSecondary,marginBottom:y.SPACING.lg},statsContainer:{flexDirection:"row",alignItems:"center",paddingTop:y.SPACING.lg,borderTopWidth:1,borderTopColor:y.COLORS.gray200},statItem:{flex:1,alignItems:"center"},statValue:{fontSize:y.FONTS.size.title,fontWeight:y.FONTS.bold,color:y.COLORS.primary},statLabel:{fontSize:y.FONTS.size.sm,color:y.COLORS.textSecondary,marginTop:y.SPACING.xs},statDivider:{width:1,height:40,backgroundColor:y.COLORS.gray200},menuGroup:Object.assign({backgroundColor:y.COLORS.cardBackground,borderRadius:y.RADIUS.lg,marginBottom:y.SPACING.md,overflow:"hidden"},y.SHADOWS.sm),menuItem:{flexDirection:"row",alignItems:"center",padding:y.SPACING.lg},menuIcon:{fontSize:22,marginRight:y.SPACING.md,width:28,textAlign:"center"},menuContent:{flex:1},menuTitle:{fontSize:y.FONTS.size.md,fontWeight:y.FONTS.medium,color:y.COLORS.textPrimary},menuTitleDanger:{color:y.COLORS.danger},menuSubtitle:{fontSize:y.FONTS.size.sm,color:y.COLORS.textSecondary,marginTop:2},menuArrow:{fontSize:y.FONTS.size.xxl,color:y.COLORS.textLight},menuDivider:{height:1,backgroundColor:y.COLORS.gray100,marginLeft:y.SPACING.lg+28+y.SPACING.md},footer:{alignItems:"center",paddingTop:y.SPACING.xl},footerText:{fontSize:y.FONTS.size.sm,color:y.COLORS.textLight},footerCopyright:{fontSize:y.FONTS.size.xs,color:y.COLORS.textLight,marginTop:y.SPACING.xs},modalOverlay:{position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",justifyContent:"center",alignItems:"center",padding:y.SPACING.lg,zIndex:1e3},modalContainer:Object.assign({backgroundColor:y.COLORS.white,borderRadius:y.RADIUS.lg,padding:y.SPACING.xl,width:"100%",maxWidth:400},y.SHADOWS.lg),modalTitle:{fontSize:y.FONTS.size.xl,fontWeight:y.FONTS.bold,color:y.COLORS.textPrimary,marginBottom:y.SPACING.lg,textAlign:"center"},inputLabel:{fontSize:y.FONTS.size.sm,color:y.COLORS.textSecondary,marginBottom:y.SPACING.xs,marginTop:y.SPACING.md},input:{backgroundColor:y.COLORS.background,borderRadius:y.RADIUS.md,padding:y.SPACING.md,borderWidth:1,borderColor:y.COLORS.gray200,fontSize:y.FONTS.size.md},modalButtons:{flexDirection:"row",justifyContent:"space-between",marginTop:y.SPACING.xl,gap:y.SPACING.md},modalButton:{flex:1,paddingVertical:y.SPACING.md,borderRadius:y.RADIUS.md,alignItems:"center"},cancelButton:{backgroundColor:y.COLORS.gray100},saveButton:{backgroundColor:y.COLORS.primary},cancelButtonText:{color:y.COLORS.textPrimary,fontWeight:y.FONTS.medium},saveButtonText:{color:y.COLORS.white,fontWeight:y.FONTS.bold}});t.default=function(){var e,t,r=(0,x.useNavigation)(),s=(0,p.useAuth)(),b=s.user,I=s.logout,j=s.refreshUser,v=(0,o.useState)(!1),A=(0,l.default)(v,2),P=A[0],R=A[1],L=(0,o.useState)(""),_=(0,l.default)(L,2),E=_[0],k=_[1],z=(0,o.useState)(""),w=(0,l.default)(z,2),B=w[0],F=w[1],G=(0,o.useState)(""),D=(0,l.default)(G,2),M=D[0],W=D[1],H=(0,o.useState)(!1),U=(0,l.default)(H,2),V=U[0],K=U[1],Y=function(){k((null==b?void 0:b.name)||""),F((null==b?void 0:b.phoneNumber)||""),W((null==b?void 0:b.lineId)||""),R(!0)},q=(t=(0,a.default)(function*(){if(E){K(!0);try{var e,t=yield C.authService.updateProfile({name:E,phoneNumber:B,lineId:M});t.data?(yield j(),S.default.alert("æˆåŠŸ","å€‹äººè³‡æ–™å·²æ›´æ–°"),R(!1)):S.default.alert("å¤±æ•—",(null==(e=t.error)?void 0:e.message)||"æ›´æ–°å¤±æ•—")}catch(e){S.default.alert("éŒ¯èª¤",e.message||"æ›´æ–°ç™¼ç”ŸéŒ¯èª¤")}finally{K(!1)}}else S.default.alert("éŒ¯èª¤","å§“åä¸èƒ½ç‚ºç©º")}),function(){return t.apply(this,arguments)}),$=[[{id:"edit_profile",icon:"ğŸ‘¤",title:"ç·¨è¼¯å€‹äººè³‡æ–™",onPress:Y,showArrow:!0},{id:"change_password",icon:"ğŸ”",title:"ä¿®æ”¹å¯†ç¢¼",onPress:function(){return S.default.alert("æç¤º","å‰å¾€ä¿®æ”¹å¯†ç¢¼")},showArrow:!0}],[{id:"notification",icon:"ğŸ””",title:"é€šçŸ¥è¨­å®š",subtitle:"ç®¡ç†é€šçŸ¥æ¸ é“",onPress:function(){return S.default.alert("æç¤º","å‰å¾€é€šçŸ¥è¨­å®š")},showArrow:!0},{id:"message_templates",icon:"ğŸ’¬",title:"è¨Šæ¯æ¨¡æ¿",subtitle:"è‡ªè¨‚é€šçŸ¥è¨Šæ¯",onPress:function(){return r.navigate("MessageTemplates")},showArrow:!0},{id:"anomaly_rules",icon:"âš ï¸",title:"ç•°å¸¸è¦å‰‡",subtitle:"è¨­å®šè§¸ç™¼æ¢ä»¶",onPress:function(){return S.default.alert("æç¤º","å‰å¾€ç•°å¸¸è¦å‰‡")},showArrow:!0}],[{id:"privacy",icon:"ğŸ”’",title:"éš±ç§è¨­å®š",onPress:function(){return S.default.alert("æç¤º","å‰å¾€éš±ç§è¨­å®š")},showArrow:!0},{id:"help",icon:"â“",title:"å¹«åŠ©ä¸­å¿ƒ",onPress:function(){return S.default.alert("æç¤º","å‰å¾€å¹«åŠ©ä¸­å¿ƒ")},showArrow:!0},{id:"about",icon:"â„¹ï¸",title:"é—œæ–¼æˆ‘å€‘",subtitle:`ç‰ˆæœ¬ ${m.APP_INFO.VERSION}`,onPress:function(){return S.default.alert("æç¤º","å‰å¾€é—œæ–¼æˆ‘å€‘")},showArrow:!0}],[{id:"logout",icon:"ğŸšª",title:"ç™»å‡º",onPress:function(){var e;S.default.alert("ç¢ºèªç™»å‡º","ç¢ºå®šè¦ç™»å‡ºå—ï¼Ÿ",[{text:"å–æ¶ˆ",style:"cancel"},{text:"ç™»å‡º",style:"destructive",onPress:(e=(0,a.default)(function*(){yield I()}),function(){return e.apply(this,arguments)})}])},danger:!0}]],J=function(e){return(0,N.jsxs)(f.default,{style:T.menuItem,onPress:e.onPress,activeOpacity:.7,children:[(0,N.jsx)(d.default,{style:T.menuIcon,children:e.icon}),(0,N.jsxs)(i.default,{style:T.menuContent,children:[(0,N.jsx)(d.default,{style:[T.menuTitle,e.danger&&T.menuTitleDanger],children:e.title}),e.subtitle&&(0,N.jsx)(d.default,{style:T.menuSubtitle,children:e.subtitle})]}),e.showArrow&&(0,N.jsx)(d.default,{style:T.menuArrow,children:"â€º"})]},e.id)};return(0,N.jsx)(O.GradientBackground,{variant:"light",children:(0,N.jsxs)(c.default,{style:T.container,children:[(0,N.jsxs)(u.default,{style:T.scrollView,contentContainerStyle:T.scrollContent,showsVerticalScrollIndicator:!1,children:[(0,N.jsx)(i.default,{style:T.profileCard,children:b?(0,N.jsxs)(N.Fragment,{children:[(0,N.jsxs)(i.default,{style:T.avatarContainer,children:[(0,N.jsx)(i.default,{style:T.avatar,children:(0,N.jsx)(d.default,{style:T.avatarText,children:(null==(e=b.name)?void 0:e.charAt(0))||"?"})}),(0,N.jsx)(f.default,{style:T.editAvatarButton,onPress:Y,children:(0,N.jsx)(d.default,{style:T.editAvatarIcon,children:"âœï¸"})})]}),(0,N.jsx)(d.default,{style:T.userName,children:b.name}),(0,N.jsx)(d.default,{style:T.userEmail,children:b.email}),b.phoneNumber&&(0,N.jsx)(d.default,{style:T.userPhone,children:b.phoneNumber}),b.lineId&&(0,N.jsxs)(d.default,{style:[T.userPhone,{color:y.COLORS.success}],children:["LINE: ",b.lineId]}),(0,N.jsxs)(i.default,{style:T.statsContainer,children:[(0,N.jsxs)(i.default,{style:T.statItem,children:[(0,N.jsx)(d.default,{style:T.statValue,children:"-"}),(0,N.jsx)(d.default,{style:T.statLabel,children:"é€£çºŒç°½åˆ°"})]}),(0,N.jsx)(i.default,{style:T.statDivider}),(0,N.jsxs)(i.default,{style:T.statItem,children:[(0,N.jsx)(d.default,{style:T.statValue,children:"-"}),(0,N.jsx)(d.default,{style:T.statLabel,children:"ç¸½ç°½åˆ°æ•¸"})]})]})]}):(0,N.jsxs)(i.default,{style:T.notLoginContainer,children:[(0,N.jsx)(d.default,{style:T.notLoginText,children:"å°šæœªç™»å…¥"}),(0,N.jsx)(f.default,{style:T.loginButton,onPress:function(){(0,n(6513).useNavigation)().navigate("Auth")},children:(0,N.jsx)(d.default,{style:T.loginButtonText,children:"ç«‹å³ç™»å…¥"})})]})}),b&&$.map(function(e,t){return function(e,t){return(0,N.jsx)(i.default,{style:T.menuGroup,children:e.map(function(t,n){return(0,N.jsxs)(o.default.Fragment,{children:[J(t),n<e.length-1&&(0,N.jsx)(i.default,{style:T.menuDivider})]},t.id)})},t)}(e,t)}),(0,N.jsxs)(i.default,{style:T.footer,children:[(0,N.jsxs)(d.default,{style:T.footerText,children:[m.APP_INFO.NAME," v",m.APP_INFO.VERSION]}),(0,N.jsx)(d.default,{style:T.footerCopyright,children:"Â© 2026 ALIVE. All rights reserved."})]})]}),P&&(0,N.jsx)(i.default,{style:T.modalOverlay,children:(0,N.jsxs)(i.default,{style:T.modalContainer,children:[(0,N.jsx)(d.default,{style:T.modalTitle,children:"ç·¨è¼¯å€‹äººè³‡æ–™"}),(0,N.jsx)(d.default,{style:T.inputLabel,children:"å§“å"}),(0,N.jsx)(g.default,{style:T.input,value:E,onChangeText:k,placeholder:"è«‹è¼¸å…¥å§“å"}),(0,N.jsx)(g.default,{style:T.input,value:B,onChangeText:F,placeholder:"è«‹è¼¸å…¥é›»è©±è™Ÿç¢¼",keyboardType:"phone-pad"}),(0,N.jsx)(d.default,{style:T.inputLabel,children:"LINE ID"}),(0,N.jsx)(g.default,{style:T.input,value:M,onChangeText:W,placeholder:"è«‹è¼¸å…¥ LINE ID (é¸å¡«)",autoCapitalize:"none"}),(0,N.jsxs)(i.default,{style:T.modalButtons,children:[(0,N.jsx)(f.default,{style:[T.modalButton,T.cancelButton],onPress:function(){return R(!1)},children:(0,N.jsx)(d.default,{style:T.cancelButtonText,children:"å–æ¶ˆ"})}),(0,N.jsx)(f.default,{style:[T.modalButton,T.saveButton],onPress:q,disabled:V,children:V?(0,N.jsx)(h.default,{color:y.COLORS.white}):(0,N.jsx)(d.default,{style:T.saveButtonText,children:"å„²å­˜"})})]})]})})]})})}},5791(e,t,n){var r=n(4994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(9293)),l=r(n(5715)),o=function(e){if("function"==typeof WeakMap){var t=new WeakMap;new WeakMap}return function(e){if(e&&e.__esModule)return e;var n,r,a={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return a;if(n=t){if(n.has(e))return n.get(e);n.set(e,a)}for(var l in e)"default"!==l&&{}.hasOwnProperty.call(e,l)&&((r=(n=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,l))&&(r.get||r.set)?n(a,l,r):a[l]=e[l]);return a}(e)}(n(6540)),i=r(n(9176)),d=r(n(8506)),s=r(n(8997)),u=r(n(4951)),c=r(n(8444)),f=r(n(4650)),S=r(n(7043)),g=r(n(5782)),h=r(n(6430)),O=r(n(4081)),y=n(2929),m=n(1858),p=n(4186),C=n(4848),x=s.default.create({container:{flex:1},header:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",paddingHorizontal:m.SPACING.lg,paddingTop:m.SPACING.lg,paddingBottom:m.SPACING.md},backButton:{padding:m.SPACING.sm},backIcon:{fontSize:m.FONTS.size.xxl,color:m.COLORS.textPrimary},headerTitle:{fontSize:m.FONTS.size.xl,fontWeight:m.FONTS.bold,color:m.COLORS.textPrimary},placeholder:{width:40},infoContainer:{paddingHorizontal:m.SPACING.lg,paddingBottom:m.SPACING.lg},infoText:{fontSize:m.FONTS.size.sm,color:m.COLORS.textSecondary,lineHeight:1.5*m.FONTS.size.sm},scrollView:{flex:1},scrollContent:{paddingHorizontal:m.SPACING.lg,paddingBottom:m.SPACING.xxxl},channelCard:Object.assign({backgroundColor:m.COLORS.cardBackground,borderRadius:m.RADIUS.lg,padding:m.SPACING.lg,marginBottom:m.SPACING.md},m.SHADOWS.sm),channelHeader:{flexDirection:"row",alignItems:"center"},channelIcon:{fontSize:28,marginRight:m.SPACING.md},channelInfo:{flex:1},channelTitleRow:{flexDirection:"row",alignItems:"center"},channelName:{fontSize:m.FONTS.size.lg,fontWeight:m.FONTS.semiBold,color:m.COLORS.textPrimary,marginRight:m.SPACING.sm},verifiedBadge:{backgroundColor:m.COLORS.success,paddingHorizontal:m.SPACING.sm,paddingVertical:2,borderRadius:m.RADIUS.sm},verifiedText:{fontSize:m.FONTS.size.xs,color:m.COLORS.white},channelDesc:{fontSize:m.FONTS.size.sm,color:m.COLORS.textSecondary,marginTop:m.SPACING.xs},channelValue:{fontSize:m.FONTS.size.sm,color:m.COLORS.primary,marginTop:m.SPACING.xs},disconnectButton:{marginTop:m.SPACING.md,paddingTop:m.SPACING.md,borderTopWidth:1,borderTopColor:m.COLORS.gray200,alignItems:"center"},disconnectText:{fontSize:m.FONTS.size.sm,color:m.COLORS.danger},noticeContainer:{backgroundColor:m.COLORS.gray100,borderRadius:m.RADIUS.lg,padding:m.SPACING.lg,marginTop:m.SPACING.lg},noticeTitle:{fontSize:m.FONTS.size.md,fontWeight:m.FONTS.semiBold,color:m.COLORS.textPrimary,marginBottom:m.SPACING.sm},noticeText:{fontSize:m.FONTS.size.sm,color:m.COLORS.textSecondary,marginTop:m.SPACING.xs,lineHeight:1.5*m.FONTS.size.sm},modalOverlay:{flex:1,backgroundColor:"rgba(0, 0, 0, 0.5)",justifyContent:"center",alignItems:"center",paddingHorizontal:m.SPACING.xl},modalContent:{backgroundColor:m.COLORS.white,borderRadius:m.RADIUS.xl,padding:m.SPACING.xl,width:"100%"},modalTitle:{fontSize:m.FONTS.size.xl,fontWeight:m.FONTS.bold,color:m.COLORS.textPrimary,textAlign:"center",marginBottom:m.SPACING.sm},modalDesc:{fontSize:m.FONTS.size.md,color:m.COLORS.textSecondary,textAlign:"center",marginBottom:m.SPACING.lg},modalInput:{borderWidth:1,borderColor:m.COLORS.gray300,borderRadius:m.RADIUS.md,paddingHorizontal:m.SPACING.md,paddingVertical:m.SPACING.md,fontSize:m.FONTS.size.lg,color:m.COLORS.textPrimary,textAlign:"center"},modalButtons:{flexDirection:"row",marginTop:m.SPACING.xl,gap:m.SPACING.md},cancelButton:{flex:1,paddingVertical:m.SPACING.md,borderRadius:m.RADIUS.md,borderWidth:1,borderColor:m.COLORS.gray300,alignItems:"center"},cancelButtonText:{fontSize:m.FONTS.size.md,color:m.COLORS.textSecondary},confirmButton:{flex:1,paddingVertical:m.SPACING.md,borderRadius:m.RADIUS.md,backgroundColor:m.COLORS.primary,alignItems:"center"},confirmButtonText:{fontSize:m.FONTS.size.md,color:m.COLORS.white,fontWeight:m.FONTS.semiBold}});t.default=function(){var e,t=(0,o.useState)([{id:"push",name:p.NOTIFICATION_CHANNELS.PUSH.name,icon:"ğŸ””",description:p.NOTIFICATION_CHANNELS.PUSH.description,enabled:!0,verified:!0},{id:"email",name:p.NOTIFICATION_CHANNELS.EMAIL.name,icon:"ğŸ“§",description:p.NOTIFICATION_CHANNELS.EMAIL.description,enabled:!1,verified:!1,value:""},{id:"line",name:p.NOTIFICATION_CHANNELS.LINE.name,icon:"ğŸ’š",description:p.NOTIFICATION_CHANNELS.LINE.description,enabled:!1,verified:!1},{id:"sms",name:p.NOTIFICATION_CHANNELS.SMS.name,icon:"ğŸ’¬",description:p.NOTIFICATION_CHANNELS.SMS.description,enabled:!1,verified:!1,value:""}]),n=(0,l.default)(t,2),r=n[0],s=n[1],N=(0,o.useState)(!1),T=(0,l.default)(N,2),b=T[0],I=T[1],j=(0,o.useState)(!1),v=(0,l.default)(j,2),A=v[0],P=v[1],R=(0,o.useState)(""),L=(0,l.default)(R,2),_=L[0],E=L[1],k=(0,o.useState)(""),z=(0,l.default)(k,2),w=z[0],B=z[1],F=(e=(0,a.default)(function*(){var e;O.default.alert("é€£æ¥ LINE Notify","å°‡é–‹å•Ÿ LINE æˆæ¬Šé é¢ï¼Œå®Œæˆå¾Œå³å¯æ¥æ”¶é€šçŸ¥ã€‚",[{text:"å–æ¶ˆ",style:"cancel"},{text:"å‰å¾€é€£æ¥",onPress:(e=(0,a.default)(function*(){s(function(e){return e.map(function(e){return"line"===e.id?Object.assign({},e,{enabled:!0,verified:!0}):e})}),O.default.alert("æˆåŠŸ","LINE Notify å·²é€£æ¥")}),function(){return e.apply(this,arguments)})}])}),function(){return e.apply(this,arguments)}),G=function(e,t){if(!e)return"";if("email"===t){var n=e.split("@"),r=(0,l.default)(n,2),a=r[0],o=r[1];return a.length<=3?`${a[0]}***@${o}`:`${a.slice(0,3)}***@${o}`}return e.replace(/(\d{4})(\d{3})(\d{3})/,"$1****$3")};return(0,C.jsx)(y.GradientBackground,{variant:"light",children:(0,C.jsxs)(c.default,{style:x.container,children:[(0,C.jsxs)(i.default,{style:x.header,children:[(0,C.jsx)(f.default,{style:x.backButton,children:(0,C.jsx)(d.default,{style:x.backIcon,children:"â†"})}),(0,C.jsx)(d.default,{style:x.headerTitle,children:"é€šçŸ¥è¨­å®š"}),(0,C.jsx)(i.default,{style:x.placeholder})]}),(0,C.jsx)(i.default,{style:x.infoContainer,children:(0,C.jsx)(d.default,{style:x.infoText,children:"é¸æ“‡æ‚¨å¸Œæœ›æ¥æ”¶é€šçŸ¥çš„æ¸ é“ã€‚ç•¶ç·Šæ€¥è¯çµ¡äººéœ€è¦è¢«é€šçŸ¥æ™‚ï¼Œç³»çµ±å°‡é€éé€™äº›æ¸ é“ç™¼é€è¨Šæ¯ã€‚"})}),(0,C.jsxs)(u.default,{style:x.scrollView,contentContainerStyle:x.scrollContent,showsVerticalScrollIndicator:!1,children:[r.map(function(e){return(0,C.jsxs)(i.default,{style:x.channelCard,children:[(0,C.jsxs)(i.default,{style:x.channelHeader,children:[(0,C.jsx)(d.default,{style:x.channelIcon,children:e.icon}),(0,C.jsxs)(i.default,{style:x.channelInfo,children:[(0,C.jsxs)(i.default,{style:x.channelTitleRow,children:[(0,C.jsx)(d.default,{style:x.channelName,children:e.name}),e.verified&&(0,C.jsx)(i.default,{style:x.verifiedBadge,children:(0,C.jsx)(d.default,{style:x.verifiedText,children:"å·²é©—è­‰"})})]}),(0,C.jsx)(d.default,{style:x.channelDesc,children:e.description}),e.value&&(0,C.jsx)(d.default,{style:x.channelValue,children:G(e.value,"email"===e.id?"email":"phone")})]}),(0,C.jsx)(S.default,{value:e.enabled,onValueChange:function(){return function(e){var t=r.find(function(t){return t.id===e});if(t){if(!t.verified&&!t.enabled)switch(e){case"email":return void I(!0);case"sms":return void P(!0);case"line":return void F()}s(function(t){return t.map(function(t){return t.id===e?Object.assign({},t,{enabled:!t.enabled}):t})})}}(e.id)},trackColor:{false:m.COLORS.gray300,true:m.COLORS.primaryLight},thumbColor:e.enabled?m.COLORS.primary:m.COLORS.gray400})]}),e.verified&&"push"!==e.id&&(0,C.jsx)(f.default,{style:x.disconnectButton,onPress:function(){return t=e.id,void O.default.alert("ç¢ºèªå–æ¶ˆç¶å®š","å–æ¶ˆç¶å®šå¾Œå°‡ç„¡æ³•é€éæ­¤æ¸ é“æ¥æ”¶é€šçŸ¥ï¼Œç¢ºå®šè¦ç¹¼çºŒå—ï¼Ÿ",[{text:"å–æ¶ˆ",style:"cancel"},{text:"ç¢ºå®š",style:"destructive",onPress:function(){s(function(e){return e.map(function(e){return e.id===t?Object.assign({},e,{enabled:!1,verified:!1,value:""}):e})})}}]);var t},children:(0,C.jsx)(d.default,{style:x.disconnectText,children:"å–æ¶ˆç¶å®š"})})]},e.id)}),(0,C.jsxs)(i.default,{style:x.noticeContainer,children:[(0,C.jsx)(d.default,{style:x.noticeTitle,children:"ğŸ“Œ æ³¨æ„äº‹é …"}),(0,C.jsx)(d.default,{style:x.noticeText,children:"â€¢ å»ºè­°è‡³å°‘å•Ÿç”¨å…©ç¨®é€šçŸ¥æ¸ é“ä»¥ç¢ºä¿è¨Šæ¯é€é”"}),(0,C.jsx)(d.default,{style:x.noticeText,children:"â€¢ LINE Notify æ¯æœˆæœ‰ç™¼é€æ•¸é‡é™åˆ¶"}),(0,C.jsx)(d.default,{style:x.noticeText,children:"â€¢ ç°¡è¨Šé€šçŸ¥å¯èƒ½ç”¢ç”Ÿé¡å¤–è²»ç”¨"})]})]}),(0,C.jsx)(h.default,{visible:b,animationType:"slide",transparent:!0,onRequestClose:function(){return I(!1)},children:(0,C.jsx)(i.default,{style:x.modalOverlay,children:(0,C.jsxs)(i.default,{style:x.modalContent,children:[(0,C.jsx)(d.default,{style:x.modalTitle,children:"è¨­å®šé›»å­éƒµç®±"}),(0,C.jsx)(d.default,{style:x.modalDesc,children:"è«‹è¼¸å…¥ç”¨æ–¼æ¥æ”¶é€šçŸ¥çš„é›»å­éƒµç®±åœ°å€"}),(0,C.jsx)(g.default,{style:x.modalInput,value:_,onChangeText:E,placeholder:"example@email.com",placeholderTextColor:m.COLORS.textLight,keyboardType:"email-address",autoCapitalize:"none"}),(0,C.jsxs)(i.default,{style:x.modalButtons,children:[(0,C.jsx)(f.default,{style:x.cancelButton,onPress:function(){return I(!1)},children:(0,C.jsx)(d.default,{style:x.cancelButtonText,children:"å–æ¶ˆ"})}),(0,C.jsx)(f.default,{style:x.confirmButton,onPress:function(){/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(_)?(s(function(e){return e.map(function(e){return"email"===e.id?Object.assign({},e,{value:_,verified:!0,enabled:!0}):e})}),I(!1),O.default.alert("æˆåŠŸ","é›»å­éƒµç®±å·²è¨­å®šï¼Œé©—è­‰éƒµä»¶å·²ç™¼é€")):O.default.alert("éŒ¯èª¤","è«‹è¼¸å…¥æœ‰æ•ˆçš„é›»å­éƒµç®±åœ°å€")},children:(0,C.jsx)(d.default,{style:x.confirmButtonText,children:"ç¢ºèª"})})]})]})})}),(0,C.jsx)(h.default,{visible:A,animationType:"slide",transparent:!0,onRequestClose:function(){return P(!1)},children:(0,C.jsx)(i.default,{style:x.modalOverlay,children:(0,C.jsxs)(i.default,{style:x.modalContent,children:[(0,C.jsx)(d.default,{style:x.modalTitle,children:"è¨­å®šæ‰‹æ©Ÿè™Ÿç¢¼"}),(0,C.jsx)(d.default,{style:x.modalDesc,children:"è«‹è¼¸å…¥ç”¨æ–¼æ¥æ”¶ç°¡è¨Šé€šçŸ¥çš„æ‰‹æ©Ÿè™Ÿç¢¼"}),(0,C.jsx)(g.default,{style:x.modalInput,value:w,onChangeText:B,placeholder:"0912345678",placeholderTextColor:m.COLORS.textLight,keyboardType:"phone-pad",maxLength:10}),(0,C.jsxs)(i.default,{style:x.modalButtons,children:[(0,C.jsx)(f.default,{style:x.cancelButton,onPress:function(){return P(!1)},children:(0,C.jsx)(d.default,{style:x.cancelButtonText,children:"å–æ¶ˆ"})}),(0,C.jsx)(f.default,{style:x.confirmButton,onPress:function(){/^09\d{8}$/.test(w)?(s(function(e){return e.map(function(e){return"sms"===e.id?Object.assign({},e,{value:w,verified:!0,enabled:!0}):e})}),P(!1),O.default.alert("æˆåŠŸ","ç°¡è¨Šé€šçŸ¥å·²è¨­å®š")):O.default.alert("éŒ¯èª¤","è«‹è¼¸å…¥æœ‰æ•ˆçš„æ‰‹æ©Ÿè™Ÿç¢¼ï¼ˆ09XXXXXXXXï¼‰")},children:(0,C.jsx)(d.default,{style:x.confirmButtonText,children:"ç¢ºèª"})})]})]})})})]})})}},6210(e,t,n){var r=n(4994);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"AnomalyRulesScreen",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"AuthScreen",{enumerable:!0,get:function(){return i.AuthScreen}}),Object.defineProperty(t,"EmergencyContactsScreen",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"HomeScreen",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"MessageTemplatesScreen",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(t,"NotificationSettingsScreen",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"ProfileScreen",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"SettingsScreen",{enumerable:!0,get:function(){return l.default}});var a=r(n(9748)),l=r(n(4906)),o=r(n(3687)),i=n(4635),d=r(n(291)),s=r(n(5791)),u=r(n(8749)),c=r(n(5764))},6352(e,t,n){var r=n(4994);Object.defineProperty(t,"__esModule",{value:!0}),t.useAuth=t.AuthProvider=void 0;var a=r(n(9293)),l=r(n(5715)),o=function(e){if("function"==typeof WeakMap){var t=new WeakMap;new WeakMap}return function(e){if(e&&e.__esModule)return e;var n,r,a={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return a;if(n=t){if(n.has(e))return n.get(e);n.set(e,a)}for(var l in e)"default"!==l&&{}.hasOwnProperty.call(e,l)&&((r=(n=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,l))&&(r.get||r.set)?n(a,l,r):a[l]=e[l]);return a}(e)}(n(6540)),i=n(7361),d=n(4848),s=(0,o.createContext)(void 0);t.AuthProvider=function(e){var t=e.children,n=(0,o.useState)(null),r=(0,l.default)(n,2),u=r[0],c=r[1],f=(0,o.useState)(!0),S=(0,l.default)(f,2),g=S[0],h=S[1];(0,o.useEffect)(function(){N()},[]);var O,y,m,p,C,x,N=(O=(0,a.default)(function*(){try{if(yield i.authService.isAuthenticated()){var e=yield i.authService.getMe();e.data&&c(e.data)}}catch(e){console.error("Check auth error:",e)}finally{h(!1)}}),function(){return O.apply(this,arguments)}),T=(y=(0,a.default)(function*(e,t){try{var n,r=yield i.authService.login({email:e,password:t});return r.data?(c(r.data.user),{success:!0}):{success:!1,error:(null==(n=r.error)?void 0:n.message)||"ç™»å…¥å¤±æ•—"}}catch(e){return{success:!1,error:e.message||"ç™»å…¥å¤±æ•—"}}}),function(e,t){return y.apply(this,arguments)}),b=(m=(0,a.default)(function*(e,t,n,r){try{var a,l=yield i.authService.register({email:e,password:t,name:n,phoneNumber:r});return l.data?(c(l.data.user),{success:!0}):{success:!1,error:(null==(a=l.error)?void 0:a.message)||"è¨»å†Šå¤±æ•—"}}catch(e){return{success:!1,error:e.message||"è¨»å†Šå¤±æ•—"}}}),function(e,t,n,r){return m.apply(this,arguments)}),I=(p=(0,a.default)(function*(e,t){try{var n,r=yield i.authService.guestLogin({phoneNumber:e,name:t});return r.data?(c(r.data.user),{success:!0}):{success:!1,error:(null==(n=r.error)?void 0:n.message)||"è¨ªå®¢ç™»å…¥å¤±æ•—"}}catch(e){return{success:!1,error:e.message||"è¨ªå®¢ç™»å…¥å¤±æ•—"}}}),function(e,t){return p.apply(this,arguments)}),j=(C=(0,a.default)(function*(){yield i.authService.logout(),c(null)}),function(){return C.apply(this,arguments)}),v=(x=(0,a.default)(function*(){try{var e=yield i.authService.getMe();e.data&&c(e.data)}catch(e){console.error("Refresh user error:",e)}}),function(){return x.apply(this,arguments)});return(0,d.jsx)(s.Provider,{value:{user:u,isLoading:g,isAuthenticated:null!==u,login:T,register:b,guestLogin:I,logout:j,refreshUser:v},children:t})},t.useAuth=function(){var e=(0,o.useContext)(s);if(void 0===e)throw new Error("useAuth must be used within AuthProvider");return e}},6623(e,t,n){var r=n(4994);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"AppNavigator",{enumerable:!0,get:function(){return a.default}});var a=r(n(2449))},7361(e,t,n){var r=n(4994);Object.defineProperty(t,"__esModule",{value:!0});var a={authService:!0,checkinService:!0,contactsService:!0,notificationService:!0,messageService:!0};Object.defineProperty(t,"authService",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"checkinService",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"contactsService",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"messageService",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"notificationService",{enumerable:!0,get:function(){return d.default}});var l=c(n(9271));Object.keys(l).forEach(function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(a,e)||e in t&&t[e]===l[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return l[e]}}))});var o=c(n(9338));Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(a,e)||e in t&&t[e]===o[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}}))});var i=c(n(9318));Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(a,e)||e in t&&t[e]===i[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}}))});var d=r(n(1592)),s=n(9722);Object.keys(s).forEach(function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(a,e)||e in t&&t[e]===s[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return s[e]}}))});var u=c(n(1730));function c(e,t){if("function"==typeof WeakMap)var n=new WeakMap,r=new WeakMap;return(c=function(e,t){if(!t&&e&&e.__esModule)return e;var a,l,o={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return o;if(a=t?r:n){if(a.has(e))return a.get(e);a.set(e,o)}for(var i in e)"default"!==i&&{}.hasOwnProperty.call(e,i)&&((l=(a=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,i))&&(l.get||l.set)?a(o,i,l):o[i]=e[i]);return o})(e,t)}Object.keys(u).forEach(function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(a,e)||e in t&&t[e]===u[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return u[e]}}))})},7699(e,t,n){var r=n(4994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=function(e){if("function"==typeof WeakMap){var t=new WeakMap;new WeakMap}return function(e){if(e&&e.__esModule)return e;var n,r,a={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return a;if(n=t){if(n.has(e))return n.get(e);n.set(e,a)}for(var l in e)"default"!==l&&{}.hasOwnProperty.call(e,l)&&((r=(n=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,l))&&(r.get||r.set)?n(a,l,r):a[l]=e[l]);return a}(e)}(n(6540)),l=r(n(9176)),o=r(n(8506)),i=r(n(4650)),d=r(n(8997)),s=r(n(8831)),u=n(1858),c=n(4848),f=d.default.create({container:{alignItems:"center",justifyContent:"center"},pulseRing:{position:"absolute",width:u.CHECK_IN_BUTTON.size+40,height:u.CHECK_IN_BUTTON.size+40,borderRadius:(u.CHECK_IN_BUTTON.size+40)/2,backgroundColor:u.COLORS.primary},button:Object.assign({width:u.CHECK_IN_BUTTON.size,height:u.CHECK_IN_BUTTON.size,borderRadius:u.CHECK_IN_BUTTON.size/2,backgroundColor:u.COLORS.primary,alignItems:"center",justifyContent:"center"},u.SHADOWS.lg),buttonChecked:{backgroundColor:u.COLORS.gray300},innerCircle:{width:u.CHECK_IN_BUTTON.innerSize,height:u.CHECK_IN_BUTTON.innerSize,borderRadius:u.CHECK_IN_BUTTON.innerSize/2,backgroundColor:u.COLORS.primaryLight,alignItems:"center",justifyContent:"center"},innerCircleChecked:{backgroundColor:u.COLORS.gray200},faceIcon:{fontSize:u.CHECK_IN_BUTTON.iconSize},checkIcon:{fontSize:u.CHECK_IN_BUTTON.iconSize,color:u.COLORS.success,fontWeight:"bold"},statusText:{position:"absolute",bottom:u.SPACING.xl,color:u.COLORS.textOnPrimary,fontSize:u.FONTS.size.lg,fontWeight:u.FONTS.semiBold},statusTextChecked:{color:u.COLORS.textSecondary}});t.default=function(e){var t=e.isCheckedIn,n=e.onPress,r=e.disabled,d=void 0!==r&&r,u=e.style,S=(0,a.useRef)(new s.default.Value(1)).current,g=(0,a.useRef)(new s.default.Value(1)).current,h=(0,a.useRef)(new s.default.Value(t?1:0)).current;return(0,a.useEffect)(function(){if(!t){var e=s.default.loop(s.default.sequence([s.default.timing(g,{toValue:1.1,duration:1e3,useNativeDriver:!0}),s.default.timing(g,{toValue:1,duration:1e3,useNativeDriver:!0})]));return e.start(),function(){return e.stop()}}g.setValue(1)},[t,g]),(0,a.useEffect)(function(){s.default.timing(h,{toValue:t?1:0,duration:300,useNativeDriver:!0}).start()},[t,h]),(0,c.jsxs)(l.default,{style:[f.container,u],children:[(0,c.jsx)(s.default.View,{style:[f.pulseRing,{transform:[{scale:g}],opacity:t?0:.3}]}),(0,c.jsx)(i.default,{activeOpacity:.9,onPress:n,onPressIn:function(){s.default.spring(S,{toValue:.95,useNativeDriver:!0}).start()},onPressOut:function(){s.default.spring(S,{toValue:1,friction:3,tension:40,useNativeDriver:!0}).start()},disabled:d,children:(0,c.jsxs)(s.default.View,{style:[f.button,t&&f.buttonChecked,{transform:[{scale:S}]}],children:[(0,c.jsx)(l.default,{style:[f.innerCircle,t&&f.innerCircleChecked],children:t?(0,c.jsx)(s.default.Text,{style:[f.checkIcon,{opacity:h,transform:[{scale:h.interpolate({inputRange:[0,1],outputRange:[.5,1]})}]}],children:"âœ“"}):(0,c.jsx)(o.default,{style:f.faceIcon,children:"ğŸ˜Š"})}),(0,c.jsx)(o.default,{style:[f.statusText,t&&f.statusTextChecked],children:t?"å·²ç°½åˆ°":"ä»Šæ—¥ç°½åˆ°"})]})})]})}},8749(e,t,n){var r=n(4994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(1132)),l=r(n(5715)),o=function(e){if("function"==typeof WeakMap){var t=new WeakMap;new WeakMap}return function(e){if(e&&e.__esModule)return e;var n,r,a={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return a;if(n=t){if(n.has(e))return n.get(e);n.set(e,a)}for(var l in e)"default"!==l&&{}.hasOwnProperty.call(e,l)&&((r=(n=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,l))&&(r.get||r.set)?n(a,l,r):a[l]=e[l]);return a}(e)}(n(6540)),i=r(n(9176)),d=r(n(8506)),s=r(n(8997)),u=r(n(4951)),c=r(n(8444)),f=r(n(4650)),S=r(n(7043)),g=r(n(5782)),h=r(n(6430)),O=r(n(4081)),y=n(2929),m=n(1858),p=n(4848),C=[{id:"rule_1",userId:"current_user",name:"é€£çºŒæœªç°½åˆ° 2 å¤©",description:"ç•¶é€£çºŒ 2 å¤©æœªç°½åˆ°æ™‚ï¼Œé€šçŸ¥æ‰€æœ‰ç·Šæ€¥è¯çµ¡äºº",condition:{type:"missed_checkin",days:2},isEnabled:!0,notifyContacts:["all"],createdAt:new Date,updatedAt:new Date},{id:"rule_2",userId:"current_user",name:"é€£çºŒæœªç°½åˆ° 7 å¤©",description:"ç•¶é€£çºŒ 7 å¤©æœªç°½åˆ°æ™‚ï¼Œç™¼é€ç·Šæ€¥è­¦å ±",condition:{type:"missed_checkin",days:7},isEnabled:!1,notifyContacts:["all"],createdAt:new Date,updatedAt:new Date}],x=s.default.create({container:{flex:1},header:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",paddingHorizontal:m.SPACING.lg,paddingTop:m.SPACING.lg,paddingBottom:m.SPACING.md},backButton:{padding:m.SPACING.sm},backIcon:{fontSize:m.FONTS.size.xxl,color:m.COLORS.textPrimary},headerTitle:{fontSize:m.FONTS.size.xl,fontWeight:m.FONTS.bold,color:m.COLORS.textPrimary},addButton:{width:36,height:36,borderRadius:18,backgroundColor:m.COLORS.primary,alignItems:"center",justifyContent:"center"},addIcon:{fontSize:m.FONTS.size.xl,color:m.COLORS.white,fontWeight:m.FONTS.bold},infoContainer:{paddingHorizontal:m.SPACING.lg,paddingBottom:m.SPACING.lg},infoText:{fontSize:m.FONTS.size.sm,color:m.COLORS.textSecondary,lineHeight:1.5*m.FONTS.size.sm},scrollView:{flex:1},scrollContent:{paddingHorizontal:m.SPACING.lg,paddingBottom:m.SPACING.xxxl},ruleCard:Object.assign({backgroundColor:m.COLORS.cardBackground,borderRadius:m.RADIUS.lg,padding:m.SPACING.lg,marginBottom:m.SPACING.md},m.SHADOWS.sm),ruleContent:{marginBottom:m.SPACING.md},ruleHeader:{flexDirection:"row",alignItems:"flex-start"},ruleIcon:{width:44,height:44,borderRadius:22,backgroundColor:m.COLORS.warning+"20",alignItems:"center",justifyContent:"center",marginRight:m.SPACING.md},ruleIconText:{fontSize:20},ruleInfo:{flex:1},ruleName:{fontSize:m.FONTS.size.lg,fontWeight:m.FONTS.semiBold,color:m.COLORS.textPrimary,marginBottom:m.SPACING.xs},ruleDesc:{fontSize:m.FONTS.size.sm,color:m.COLORS.textSecondary,lineHeight:1.4*m.FONTS.size.sm},ruleActions:{flexDirection:"row",alignItems:"center",justifyContent:"space-between",paddingTop:m.SPACING.md,borderTopWidth:1,borderTopColor:m.COLORS.gray200},deleteButton:{padding:m.SPACING.sm},deleteIcon:{fontSize:18},emptyContainer:{alignItems:"center",paddingTop:m.SPACING.huge},emptyIcon:{fontSize:60,marginBottom:m.SPACING.lg},emptyText:{fontSize:m.FONTS.size.lg,fontWeight:m.FONTS.medium,color:m.COLORS.textPrimary,marginBottom:m.SPACING.sm},emptyHint:{fontSize:m.FONTS.size.md,color:m.COLORS.textSecondary,textAlign:"center"},tipContainer:{backgroundColor:m.COLORS.info+"15",borderRadius:m.RADIUS.lg,padding:m.SPACING.lg,marginTop:m.SPACING.lg},tipTitle:{fontSize:m.FONTS.size.md,fontWeight:m.FONTS.semiBold,color:m.COLORS.info,marginBottom:m.SPACING.sm},tipText:{fontSize:m.FONTS.size.sm,color:m.COLORS.textSecondary,lineHeight:1.5*m.FONTS.size.sm},modalOverlay:{flex:1,backgroundColor:"rgba(0, 0, 0, 0.5)",justifyContent:"center",alignItems:"center",paddingHorizontal:m.SPACING.xl},modalContent:{backgroundColor:m.COLORS.white,borderRadius:m.RADIUS.xl,padding:m.SPACING.xl,width:"100%"},modalTitle:{fontSize:m.FONTS.size.xl,fontWeight:m.FONTS.bold,color:m.COLORS.textPrimary,textAlign:"center",marginBottom:m.SPACING.xl},inputGroup:{marginBottom:m.SPACING.lg},inputLabel:{fontSize:m.FONTS.size.sm,color:m.COLORS.textSecondary,marginBottom:m.SPACING.sm},input:{borderWidth:1,borderColor:m.COLORS.gray300,borderRadius:m.RADIUS.md,paddingHorizontal:m.SPACING.md,paddingVertical:m.SPACING.md,fontSize:m.FONTS.size.md,color:m.COLORS.textPrimary},daysInputContainer:{flexDirection:"row",alignItems:"center"},daysInput:{flex:1,textAlign:"center"},daysUnit:{fontSize:m.FONTS.size.lg,color:m.COLORS.textSecondary,marginLeft:m.SPACING.md},inputHint:{fontSize:m.FONTS.size.xs,color:m.COLORS.textLight,marginTop:m.SPACING.sm},modalButtons:{flexDirection:"row",marginTop:m.SPACING.lg,gap:m.SPACING.md},cancelButton:{flex:1,paddingVertical:m.SPACING.md,borderRadius:m.RADIUS.md,borderWidth:1,borderColor:m.COLORS.gray300,alignItems:"center"},cancelButtonText:{fontSize:m.FONTS.size.md,color:m.COLORS.textSecondary},saveButton:{flex:1,paddingVertical:m.SPACING.md,borderRadius:m.RADIUS.md,backgroundColor:m.COLORS.primary,alignItems:"center"},saveButtonText:{fontSize:m.FONTS.size.md,color:m.COLORS.white,fontWeight:m.FONTS.semiBold}});t.default=function(){var e=(0,o.useState)(C),t=(0,l.default)(e,2),n=t[0],r=t[1],s=(0,o.useState)(!1),N=(0,l.default)(s,2),T=N[0],b=N[1],I=(0,o.useState)(null),j=(0,l.default)(I,2),v=j[0],A=j[1],P=(0,o.useState)(""),R=(0,l.default)(P,2),L=R[0],_=R[1],E=(0,o.useState)(""),k=(0,l.default)(E,2),z=k[0],w=k[1],B=function(){b(!1),A(null),_(""),w("")};return(0,p.jsx)(y.GradientBackground,{variant:"light",children:(0,p.jsxs)(c.default,{style:x.container,children:[(0,p.jsxs)(i.default,{style:x.header,children:[(0,p.jsx)(f.default,{style:x.backButton,children:(0,p.jsx)(d.default,{style:x.backIcon,children:"â†"})}),(0,p.jsx)(d.default,{style:x.headerTitle,children:"ç•°å¸¸è¦å‰‡"}),(0,p.jsx)(f.default,{style:x.addButton,onPress:function(){A(null),_(""),w(""),b(!0)},children:(0,p.jsx)(d.default,{style:x.addIcon,children:"ï¼‹"})})]}),(0,p.jsx)(i.default,{style:x.infoContainer,children:(0,p.jsx)(d.default,{style:x.infoText,children:"è¨­å®šè§¸ç™¼ç·Šæ€¥é€šçŸ¥çš„æ¢ä»¶ã€‚ç•¶ç¬¦åˆè¦å‰‡æ¢ä»¶æ™‚ï¼Œç³»çµ±æœƒè‡ªå‹•é€šçŸ¥æ‚¨çš„ç·Šæ€¥è¯çµ¡äººã€‚"})}),(0,p.jsxs)(u.default,{style:x.scrollView,contentContainerStyle:x.scrollContent,showsVerticalScrollIndicator:!1,children:[0===n.length?(0,p.jsxs)(i.default,{style:x.emptyContainer,children:[(0,p.jsx)(d.default,{style:x.emptyIcon,children:"ğŸ“‹"}),(0,p.jsx)(d.default,{style:x.emptyText,children:"å°šæœªè¨­å®šä»»ä½•è¦å‰‡"}),(0,p.jsx)(d.default,{style:x.emptyHint,children:"é»æ“Šå³ä¸Šè§’ ï¼‹ æ·»åŠ æ‚¨çš„ç¬¬ä¸€å€‹ç•°å¸¸è¦å‰‡"})]}):n.map(function(e){return(0,p.jsxs)(i.default,{style:x.ruleCard,children:[(0,p.jsx)(f.default,{style:x.ruleContent,onPress:function(){return function(e){var t;A(e),_(e.name),w((null==(t=e.condition.days)?void 0:t.toString())||""),b(!0)}(e)},activeOpacity:.7,children:(0,p.jsxs)(i.default,{style:x.ruleHeader,children:[(0,p.jsx)(i.default,{style:x.ruleIcon,children:(0,p.jsx)(d.default,{style:x.ruleIconText,children:"âš ï¸"})}),(0,p.jsxs)(i.default,{style:x.ruleInfo,children:[(0,p.jsx)(d.default,{style:x.ruleName,children:e.name}),(0,p.jsx)(d.default,{style:x.ruleDesc,children:e.description})]})]})}),(0,p.jsxs)(i.default,{style:x.ruleActions,children:[(0,p.jsx)(S.default,{value:e.isEnabled,onValueChange:function(){return t=e.id,void r(function(e){return e.map(function(e){return e.id===t?Object.assign({},e,{isEnabled:!e.isEnabled}):e})});var t},trackColor:{false:m.COLORS.gray300,true:m.COLORS.primaryLight},thumbColor:e.isEnabled?m.COLORS.primary:m.COLORS.gray400}),(0,p.jsx)(f.default,{style:x.deleteButton,onPress:function(){return function(e){O.default.alert("ç¢ºèªåˆªé™¤",`ç¢ºå®šè¦åˆªé™¤ã€Œ${e.name}ã€å—ï¼Ÿ`,[{text:"å–æ¶ˆ",style:"cancel"},{text:"åˆªé™¤",style:"destructive",onPress:function(){r(function(t){return t.filter(function(t){return t.id!==e.id})})}}])}(e)},children:(0,p.jsx)(d.default,{style:x.deleteIcon,children:"ğŸ—‘ï¸"})})]})]},e.id)}),n.length>0&&(0,p.jsxs)(i.default,{style:x.tipContainer,children:[(0,p.jsx)(d.default,{style:x.tipTitle,children:"ğŸ’¡ å°æç¤º"}),(0,p.jsx)(d.default,{style:x.tipText,children:"å»ºè­°è¨­å®šå¤šå€‹ä¸åŒå¤©æ•¸çš„è¦å‰‡ï¼Œä¾‹å¦‚ï¼š2å¤©æ™‚ç™¼é€æé†’ï¼Œ7å¤©æ™‚ç™¼é€ç·Šæ€¥è­¦å ±ã€‚"})]})]}),(0,p.jsx)(h.default,{visible:T,animationType:"slide",transparent:!0,onRequestClose:B,children:(0,p.jsx)(i.default,{style:x.modalOverlay,children:(0,p.jsxs)(i.default,{style:x.modalContent,children:[(0,p.jsx)(d.default,{style:x.modalTitle,children:v?"ç·¨è¼¯è¦å‰‡":"æ–°å¢è¦å‰‡"}),(0,p.jsxs)(i.default,{style:x.inputGroup,children:[(0,p.jsx)(d.default,{style:x.inputLabel,children:"è¦å‰‡åç¨±"}),(0,p.jsx)(g.default,{style:x.input,value:L,onChangeText:_,placeholder:"ä¾‹å¦‚ï¼šé€£çºŒæœªç°½åˆ° 3 å¤©",placeholderTextColor:m.COLORS.textLight})]}),(0,p.jsxs)(i.default,{style:x.inputGroup,children:[(0,p.jsx)(d.default,{style:x.inputLabel,children:"æœªç°½åˆ°å¤©æ•¸"}),(0,p.jsxs)(i.default,{style:x.daysInputContainer,children:[(0,p.jsx)(g.default,{style:[x.input,x.daysInput],value:z,onChangeText:w,placeholder:"2",placeholderTextColor:m.COLORS.textLight,keyboardType:"numeric",maxLength:2}),(0,p.jsx)(d.default,{style:x.daysUnit,children:"å¤©"})]}),(0,p.jsxs)(d.default,{style:x.inputHint,children:["ç•¶é€£çºŒ ",z||"?"," å¤©æœªç°½åˆ°æ™‚è§¸ç™¼é€šçŸ¥"]})]}),(0,p.jsxs)(i.default,{style:x.modalButtons,children:[(0,p.jsx)(f.default,{style:x.cancelButton,onPress:B,children:(0,p.jsx)(d.default,{style:x.cancelButtonText,children:"å–æ¶ˆ"})}),(0,p.jsx)(f.default,{style:x.saveButton,onPress:function(){var e=parseInt(z,10);if(L.trim())if(isNaN(e)||e<1||e>30)O.default.alert("éŒ¯èª¤","å¤©æ•¸å¿…é ˆåœ¨ 1-30 ä¹‹é–“");else{if(v)r(function(t){return t.map(function(t){return t.id===v.id?Object.assign({},t,{name:L,description:`ç•¶é€£çºŒ ${e} å¤©æœªç°½åˆ°æ™‚ï¼Œé€šçŸ¥æ‰€æœ‰ç·Šæ€¥è¯çµ¡äºº`,condition:{type:"missed_checkin",days:e},updatedAt:new Date}):t})});else{var t={id:`rule_${Date.now()}`,userId:"current_user",name:L,description:`ç•¶é€£çºŒ ${e} å¤©æœªç°½åˆ°æ™‚ï¼Œé€šçŸ¥æ‰€æœ‰ç·Šæ€¥è¯çµ¡äºº`,condition:{type:"missed_checkin",days:e},isEnabled:!0,notifyContacts:["all"],createdAt:new Date,updatedAt:new Date};r(function(e){return[].concat((0,a.default)(e),[t])})}B(),O.default.alert("æˆåŠŸ","ç•°å¸¸è¦å‰‡å·²å„²å­˜")}else O.default.alert("éŒ¯èª¤","è«‹è¼¸å…¥è¦å‰‡åç¨±")},children:(0,p.jsx)(d.default,{style:x.saveButtonText,children:"å„²å­˜"})})]})]})})})]})})}},8776(e,t,n){var r=n(4994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(n(6540));var a=r(n(9176)),l=r(n(8997)),o=r(n(7576)),i=n(1858),d=n(4848),s=l.default.create({container:{flex:1}});t.default=function(e){var t=e.children,n=e.style,r=e.variant,l=void 0===r?"primary":r;return(0,d.jsxs)(a.default,{style:[s.container,{backgroundColor:function(){switch(l){case"primary":default:return i.COLORS.primary;case"light":return i.COLORS.background;case"dark":return i.COLORS.gray800}}()},n],children:[(0,d.jsx)(o.default,{barStyle:"light"===l?"dark-content":"light-content",backgroundColor:"transparent",translucent:!0}),t]})}},9271(e,t,n){var r=n(4994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,l,o,i,d,s,u,c,f,S=r(n(9293)),g=r(n(7383)),h=r(n(4579)),O=r(n(2444)),y=n(9722),m=(0,h.default)(function e(){(0,g.default)(this,e)},[{key:"register",value:(f=(0,S.default)(function*(e){var t=yield(0,y.apiRequest)("/auth/register",{method:"POST",body:JSON.stringify(e)});return t.data&&(yield this.saveToken(t.data.token)),t}),function(e){return f.apply(this,arguments)})},{key:"login",value:(c=(0,S.default)(function*(e){var t=yield(0,y.apiRequest)("/auth/login",{method:"POST",body:JSON.stringify(e)});return t.data&&(yield this.saveToken(t.data.token)),t}),function(e){return c.apply(this,arguments)})},{key:"guestLogin",value:(u=(0,S.default)(function*(e){var t=yield(0,y.apiRequest)("/auth/guest-login",{method:"POST",body:JSON.stringify(e)});return t.data&&(yield this.saveToken(t.data.token)),t}),function(e){return u.apply(this,arguments)})},{key:"getMe",value:(s=(0,S.default)(function*(){var e=yield this.getToken();return e?(0,y.authenticatedRequest)("/auth/me",e,{method:"GET"}):{error:{code:"NO_TOKEN",message:"æœªç™»å…¥"}}}),function(){return s.apply(this,arguments)})},{key:"updateProfile",value:(d=(0,S.default)(function*(e){var t=yield this.getToken();return t?(0,y.authenticatedRequest)("/user/profile",t,{method:"PUT",body:JSON.stringify(e)}):{error:{code:"NO_TOKEN",message:"æœªç™»å…¥"}}}),function(e){return d.apply(this,arguments)})},{key:"logout",value:(i=(0,S.default)(function*(){yield O.default.removeItem(y.AUTH_TOKEN_KEY)}),function(){return i.apply(this,arguments)})},{key:"saveToken",value:(o=(0,S.default)(function*(e){yield O.default.setItem(y.AUTH_TOKEN_KEY,e)}),function(e){return o.apply(this,arguments)})},{key:"getToken",value:(l=(0,S.default)(function*(){return yield O.default.getItem(y.AUTH_TOKEN_KEY)}),function(){return l.apply(this,arguments)})},{key:"isAuthenticated",value:(a=(0,S.default)(function*(){return!!(yield this.getToken())}),function(){return a.apply(this,arguments)})}]);t.default=new m},9318(e,t,n){var r=n(4994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,l,o,i,d=r(n(9293)),s=r(n(7383)),u=r(n(4579)),c=n(9722),f=r(n(9271)),S=(0,u.default)(function e(){(0,s.default)(this,e)},[{key:"getAll",value:(i=(0,d.default)(function*(){var e=yield f.default.getToken();return e?(0,c.authenticatedRequest)("/contacts",e,{method:"GET"}):{error:{code:"NO_TOKEN",message:"æœªç™»å…¥"}}}),function(){return i.apply(this,arguments)})},{key:"create",value:(o=(0,d.default)(function*(e){var t=yield f.default.getToken();return t?(0,c.authenticatedRequest)("/contacts",t,{method:"POST",body:JSON.stringify(e)}):{error:{code:"NO_TOKEN",message:"æœªç™»å…¥"}}}),function(e){return o.apply(this,arguments)})},{key:"update",value:(l=(0,d.default)(function*(e,t){var n=yield f.default.getToken();return n?(0,c.authenticatedRequest)(`/contacts/${e}`,n,{method:"PUT",body:JSON.stringify(t)}):{error:{code:"NO_TOKEN",message:"æœªç™»å…¥"}}}),function(e,t){return l.apply(this,arguments)})},{key:"delete",value:(a=(0,d.default)(function*(e){var t=yield f.default.getToken();return t?(0,c.authenticatedRequest)(`/contacts/${e}`,t,{method:"DELETE"}):{error:{code:"NO_TOKEN",message:"æœªç™»å…¥"}}}),function(e){return a.apply(this,arguments)})}]);t.default=new S},9338(e,t,n){var r=n(4994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,l,o,i=r(n(9293)),d=r(n(7383)),s=r(n(4579)),u=n(9722),c=r(n(9271)),f=(0,s.default)(function e(){(0,d.default)(this,e)},[{key:"createCheckIn",value:(o=(0,i.default)(function*(e){var t=yield c.default.getToken();return t?(0,u.authenticatedRequest)("/checkin",t,{method:"POST",body:JSON.stringify(e||{})}):{error:{code:"NO_TOKEN",message:"æœªç™»å…¥"}}}),function(e){return o.apply(this,arguments)})},{key:"getToken",value:(l=(0,i.default)(function*(){return c.default.getToken()}),function(){return l.apply(this,arguments)})},{key:"getHistory",value:(a=(0,i.default)(function*(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:30,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=yield c.default.getToken();return n?(0,u.authenticatedRequest)(`/checkin/history?limit=${e}&offset=${t}`,n,{method:"GET"}):{error:{code:"NO_TOKEN",message:"æœªç™»å…¥"}}}),function(){return a.apply(this,arguments)})}]);t.default=new f},9722(e,t,n){var r=n(4994);Object.defineProperty(t,"__esModule",{value:!0}),t.AUTH_TOKEN_KEY=t.API_BASE_URL=void 0,t.apiRequest=o,t.authenticatedRequest=function(e,t){return d.apply(this,arguments)};var a=r(n(9293)),l=t.API_BASE_URL="https://alive-iota.vercel.app/api";function o(e){return i.apply(this,arguments)}function i(){return i=(0,a.default)(function*(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{var n=yield fetch(`${l}${e}`,Object.assign({},t,{headers:Object.assign({"Content-Type":"application/json"},t.headers)})),r=yield n.json();return n.ok?{data:r}:{error:r.error||{code:"UNKNOWN_ERROR",message:"ç™¼ç”ŸæœªçŸ¥éŒ¯èª¤"}}}catch(e){return{error:{code:"NETWORK_ERROR",message:"ç¶²è·¯éŒ¯èª¤ï¼Œè«‹æª¢æŸ¥é€£ç·š",details:e.message}}}}),i.apply(this,arguments)}function d(){return d=(0,a.default)(function*(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return o(e,Object.assign({},n,{headers:Object.assign({},n.headers,{Authorization:`Bearer ${t}`})}))}),d.apply(this,arguments)}t.AUTH_TOKEN_KEY="@alive_auth_token"},9748(e,t,n){var r=n(4994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(9293)),l=r(n(5715)),o=function(e){if("function"==typeof WeakMap){var t=new WeakMap;new WeakMap}return function(e){if(e&&e.__esModule)return e;var n,r,a={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return a;if(n=t){if(n.has(e))return n.get(e);n.set(e,a)}for(var l in e)"default"!==l&&{}.hasOwnProperty.call(e,l)&&((r=(n=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,l))&&(r.get||r.set)?n(a,l,r):a[l]=e[l]);return a}(e)}(n(6540)),i=r(n(9176)),d=r(n(8506)),s=r(n(8997)),u=r(n(4951)),c=r(n(8444)),f=r(n(4650)),S=r(n(4081)),g=r(n(5782)),h=r(n(6430)),O=r(n(5470)),y=r(n(7862)),m=n(2929),p=n(1858),C=n(4186),x=n(7361),N=n(6352),T=n(6513),b=n(4848),I=s.default.create({container:{flex:1},header:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",paddingHorizontal:p.SPACING.lg,paddingTop:p.SPACING.lg,paddingBottom:p.SPACING.md},headerTitle:{fontSize:p.FONTS.size.xxl,fontWeight:p.FONTS.bold,color:p.COLORS.textPrimary},settingsButton:{padding:p.SPACING.sm},settingsIcon:{fontSize:p.FONTS.size.xxl},scrollView:{flex:1},scrollContent:{paddingHorizontal:p.SPACING.lg,paddingBottom:p.SPACING.xxxl},dateText:{fontSize:p.FONTS.size.sm,color:p.COLORS.textSecondary,textAlign:"center",marginBottom:p.SPACING.sm},statusHint:{fontSize:p.FONTS.size.md,color:p.COLORS.textSecondary,textAlign:"center",marginBottom:p.SPACING.xxl},checkInContainer:{alignItems:"center",marginVertical:p.SPACING.xxl},lastCheckInText:{marginTop:p.SPACING.lg,fontSize:p.FONTS.size.sm,color:p.COLORS.textSecondary},sloganContainer:{alignItems:"center",marginBottom:p.SPACING.xxl},slogan:{fontSize:p.FONTS.size.lg,fontWeight:p.FONTS.medium,color:p.COLORS.primary,marginBottom:p.SPACING.xs},sloganEn:{fontSize:p.FONTS.size.sm,color:p.COLORS.textLight},cardsContainer:{gap:p.SPACING.md},card:{marginBottom:p.SPACING.md},statusBadge:{width:28,height:28,borderRadius:14,alignItems:"center",justifyContent:"center"},statusBadgeSuccess:{backgroundColor:p.COLORS.success},statusBadgeWarning:{backgroundColor:p.COLORS.warning},statusBadgeText:{color:p.COLORS.white,fontSize:p.FONTS.size.md,fontWeight:p.FONTS.bold},arrowIcon:{fontSize:p.FONTS.size.xxl,color:p.COLORS.textLight},footer:{paddingHorizontal:p.SPACING.lg,paddingVertical:p.SPACING.lg,alignItems:"center"},footerText:{fontSize:p.FONTS.size.xs,color:p.COLORS.textLight,textAlign:"center",marginBottom:p.SPACING.sm},footerLinks:{flexDirection:"row",alignItems:"center"},footerLink:{fontSize:p.FONTS.size.xs,color:p.COLORS.primary},footerDivider:{fontSize:p.FONTS.size.xs,color:p.COLORS.textLight,marginHorizontal:p.SPACING.xs},footerCopyright:{fontSize:p.FONTS.size.xs,color:p.COLORS.textLight,marginTop:p.SPACING.xs,fontWeight:"bold"},guestFormCard:Object.assign({backgroundColor:p.COLORS.white,borderRadius:p.RADIUS.lg,padding:p.SPACING.lg,marginBottom:p.SPACING.md},p.SHADOWS.md),guestFormTitle:{fontSize:p.FONTS.size.lg,fontWeight:p.FONTS.bold,color:p.COLORS.textPrimary,marginBottom:p.SPACING.xs},guestFormSubtitle:{fontSize:p.FONTS.size.sm,color:p.COLORS.textSecondary,marginBottom:p.SPACING.md},guestInput:{backgroundColor:p.COLORS.background,borderRadius:p.RADIUS.md,padding:p.SPACING.md,marginBottom:p.SPACING.sm,fontSize:p.FONTS.size.md,borderWidth:1,borderColor:p.COLORS.gray300,color:p.COLORS.textPrimary},guestButton:{backgroundColor:p.COLORS.primary,borderRadius:p.RADIUS.md,padding:p.SPACING.md,alignItems:"center",marginTop:p.SPACING.sm},guestButtonText:{color:p.COLORS.white,fontWeight:p.FONTS.bold,fontSize:p.FONTS.size.md},modalOverlay:{flex:1,backgroundColor:"rgba(0,0,0,0.5)",justifyContent:"center",padding:p.SPACING.lg},modalContent:Object.assign({backgroundColor:p.COLORS.white,borderRadius:p.RADIUS.lg,padding:p.SPACING.xl},p.SHADOWS.lg),modalHeader:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",marginBottom:p.SPACING.md},modalTitle:{fontSize:p.FONTS.size.xl,fontWeight:p.FONTS.bold,color:p.COLORS.textPrimary},modalSubtitle:{fontSize:p.FONTS.size.sm,color:p.COLORS.textSecondary,marginBottom:p.SPACING.lg,lineHeight:20},closeButton:{padding:p.SPACING.xs},closeButtonText:{fontSize:p.FONTS.size.lg,color:p.COLORS.textLight},inputLabel:{fontSize:p.FONTS.size.sm,color:p.COLORS.textSecondary,marginBottom:p.SPACING.xs,marginTop:p.SPACING.sm}});t.default=function(){var e=(0,T.useNavigation)(),t=(0,N.useAuth)(),n=t.user,r=t.guestLogin,s=(0,o.useState)(!1),j=(0,l.default)(s,2),v=j[0],A=j[1],P=(0,o.useState)(null),R=(0,l.default)(P,2),L=R[0],_=R[1],E=(0,o.useState)(!1),k=(0,l.default)(E,2),z=k[0],w=k[1],B=(0,o.useState)(""),F=(0,l.default)(B,2),G=F[0],D=F[1],M=(0,o.useState)(""),W=(0,l.default)(M,2),H=W[0],U=W[1],V=(0,o.useState)(null),K=(0,l.default)(V,2),Y=K[0],q=K[1],$=(0,o.useState)(!1),J=(0,l.default)($,2),X=J[0],Z=J[1];o.default.useEffect(function(){x.checkinService.getToken().then(function(e){return q(e)})},[n]);var Q,ee,te=(0,o.useCallback)(function(){if(!n)return Z(!0),!1;var t=!!n.email||!!n.phoneNumber||!!n.lineId;return console.log("Profile Check:",{email:!!n.email,phone:!!n.phoneNumber,line:!!n.lineId,result:t}),!!t||(S.default.alert("éœ€è¦ç¶å®šè³‡æ–™",`ç‚ºäº†èƒ½å¤ å®Œæˆç°½åˆ°ï¼Œè«‹è‡³å°‘ç¶å®šä¸€ç¨®è¯çµ¡æ–¹å¼ï¼š\n1. æ‰‹æ©Ÿè™Ÿç¢¼ ${n.phoneNumber?"(å·²ç¶å®š)":"(æœªç¶å®š)"}\n2. Email ${n.email?"(å·²ç¶å®š)":"(æœªç¶å®š)"}\n3. LINE ID ${n.lineId?"(å·²ç¶å®š)":"(æœªç¶å®š)"}`,[{text:"ç¨å¾Œå†èªª",style:"cancel"},{text:"å‰å¾€è¨­å®šé ",onPress:function(){return e.navigate("Profile")}}]),!1)},[n,e]),ne=(0,o.useCallback)((0,a.default)(function*(){if(te())if(v)S.default.alert("å·²ç°½åˆ°","æ‚¨ä»Šå¤©å·²ç¶“å®Œæˆç°½åˆ°äº†ï¼");else{w(!0);try{var t,n,r,a=yield x.checkinService.createCheckIn();a.data?(A(!0),_(new Date(a.data.checkIn.timestamp)),S.default.alert("ç°½åˆ°æˆåŠŸï¼","æ‚¨çš„å¹³å®‰å·²è¨˜éŒ„ã€‚",[{text:"ç¢ºå®š",style:"default"}])):"PROFILE_INCOMPLETE"===(null==(t=a.error)?void 0:t.code)?S.default.alert("è³‡æ–™æœªå®Œå–„ (ä¼ºæœå™¨å›æ‡‰)","ç°½åˆ°å‰è«‹è‡³å°‘ç¶å®šä¸€é …è¯çµ¡æ–¹å¼ (æ‰‹æ©Ÿã€Email æˆ– LINE)ï¼Œä»¥ç¢ºä¿ç·Šæ€¥æ™‚åˆ»èƒ½é€šçŸ¥åˆ°æ‚¨ã€‚",[{text:"ç¨å¾Œå†èªª",style:"cancel"},{text:"å‰å¾€ç¶å®š",onPress:function(){return e.navigate("Profile")}}]):S.default.alert("ç°½åˆ°å¤±æ•—",`éŒ¯èª¤ä»£ç¢¼: ${null==(n=a.error)?void 0:n.code}\nè¨Šæ¯: ${null==(r=a.error)?void 0:r.message}`,[{text:"ç¢ºå®š",style:"cancel"}])}catch(e){S.default.alert("ç™¼ç”Ÿä¾‹å¤–éŒ¯èª¤",e.message)}finally{w(!1)}}}),[v,te]),re=(Q=(0,a.default)(function*(){if(G)if(G.length<8)S.default.alert("æç¤º","è«‹è¼¸å…¥æœ‰æ•ˆçš„æ‰‹æ©Ÿè™Ÿç¢¼");else{w(!0);try{var e=yield r(G,H);e.success?(Z(!1),D(""),U(""),S.default.alert("æ­¡è¿","å·²è‡ªå‹•ç™»å…¥ï¼è«‹å†æ¬¡é»æ“Šã€Œç°½åˆ°ã€æŒ‰éˆ•ä»¥å®Œæˆä»Šæ—¥ç°½åˆ°ã€‚",[{text:"å¥½",onPress:function(){return ne()}}])):S.default.alert("ç™»å…¥å¤±æ•—",e.error)}catch(e){S.default.alert("éŒ¯èª¤","ç™¼ç”Ÿæœªé æœŸçš„éŒ¯èª¤")}finally{w(!1)}}else S.default.alert("æç¤º","è«‹è¼¸å…¥æ‰‹æ©Ÿè™Ÿç¢¼")}),function(){return Q.apply(this,arguments)});return(0,b.jsx)(m.GradientBackground,{variant:"light",children:(0,b.jsxs)(c.default,{style:I.container,children:[(0,b.jsxs)(i.default,{style:I.header,children:[(0,b.jsx)(d.default,{style:I.headerTitle,children:"ä»Šæ—¥ç‹€æ…‹"}),(0,b.jsx)(f.default,{style:I.settingsButton,onPress:function(){return e.navigate("Profile")},children:(0,b.jsx)(d.default,{style:I.settingsIcon,children:"âš™ï¸"})})]}),(0,b.jsxs)(u.default,{style:I.scrollView,contentContainerStyle:I.scrollContent,showsVerticalScrollIndicator:!1,children:[(0,b.jsx)(d.default,{style:I.dateText,children:(new Date).toLocaleDateString("zh-TW",{year:"numeric",month:"long",day:"numeric",weekday:"long"})}),(0,b.jsx)(d.default,{style:I.statusHint,children:v?"ä»Šæ—¥å·²ç°½åˆ°ï¼Œé¡˜æ‚¨å¹³å®‰é †å¿ƒ âœ¨":"ç³»çµ±å°‡æ¯æ—¥ç°½åˆ°è¨˜éŒ„æ‚¨çš„å¹³å®‰ç‹€æ…‹"}),(0,b.jsxs)(i.default,{style:I.checkInContainer,children:[(0,b.jsx)(m.CheckInButton,{isCheckedIn:v,onPress:ne,disabled:z}),L&&(0,b.jsxs)(d.default,{style:I.lastCheckInText,children:["æœ€å¾Œç°½åˆ°ï¼š",(ee=L,ee?ee.toLocaleTimeString("zh-TW",{hour:"2-digit",minute:"2-digit"}):"å°šæœªç°½åˆ°")]})]}),(0,b.jsxs)(i.default,{style:I.sloganContainer,children:[(0,b.jsx)(d.default,{style:I.slogan,children:C.APP_INFO.SLOGAN}),(0,b.jsx)(d.default,{style:I.sloganEn,children:"Daily check-in, all is well"})]}),(0,b.jsxs)(i.default,{style:I.cardsContainer,children:[(0,b.jsx)(m.StatusCard,{title:"å®‰å…¨ç‹€æ…‹",subtitle:v?"ç‹€æ…‹å®‰å…¨":"å¾…ç°½åˆ°",variant:v?"success":"warning",rightContent:(0,b.jsx)(i.default,{style:[I.statusBadge,v?I.statusBadgeSuccess:I.statusBadgeWarning],children:(0,b.jsx)(d.default,{style:I.statusBadgeText,children:v?"âœ“":"!"})}),style:I.card}),n&&n.id?(0,b.jsx)(m.StatusCard,{title:"ç·Šæ€¥è¯çµ¡äºº",subtitle:"ç®¡ç†è¯çµ¡äºº",variant:"danger",onPress:function(){return e.navigate("Profile")},rightContent:(0,b.jsx)(d.default,{style:I.arrowIcon,children:"â€º"}),style:I.card}):(0,b.jsx)(m.StatusCard,{title:"è¨ªå®¢æ¨¡å¼",subtitle:"å°šæœªå•Ÿç”¨ (é»æ“Šç°½åˆ°ä»¥å•Ÿç”¨)",variant:"warning",onPress:function(){return Z(!0)},rightContent:(0,b.jsx)(d.default,{style:I.arrowIcon,children:"â€º"}),style:I.card}),(0,b.jsx)(m.StatusCard,{title:"æœ€è¿‘æ¨é€è¨Šæ¯",subtitle:"ä»Šå¤© Â· ç°½åˆ°æé†’å·²ç™¼é€",variant:"info",style:I.card})]})]}),(0,b.jsxs)(i.default,{style:I.footer,children:[(0,b.jsx)(d.default,{style:I.footerText,children:"å¤šæ—¥æœªç°½åˆ°ï¼Œç³»çµ±å°‡ä»¥ä½ çš„åç¾©ï¼Œçµ¦æ‚¨è¨­å®šçš„ç·Šæ€¥è¯çµ¡äººç™¼é€é€šçŸ¥"}),(0,b.jsxs)(i.default,{style:I.footerLinks,children:[(0,b.jsx)(f.default,{children:(0,b.jsx)(d.default,{style:I.footerLink,children:"ç”¨æˆ¶å”è­°"})}),(0,b.jsx)(d.default,{style:I.footerDivider,children:"å’Œ"}),(0,b.jsx)(f.default,{children:(0,b.jsx)(d.default,{style:I.footerLink,children:"éš±ç§æ”¿ç­–"})})]}),(0,b.jsx)(d.default,{style:I.footerCopyright,children:"Â© 2026 ALIVE. All rights reserved. (Build: 2026.01.23-LAZY-V1)"}),(0,b.jsxs)(i.default,{style:{marginTop:20,padding:10,backgroundColor:"#eee",borderRadius:8},children:[(0,b.jsx)(d.default,{style:{fontWeight:"bold"},children:"DEBUG INFO"}),(0,b.jsxs)(d.default,{style:{fontSize:10,fontFamily:"monospace"},children:["UID: ",(null==n?void 0:n.id)||"null"," | Name: ",(null==n?void 0:n.name)||"null"]}),(0,b.jsxs)(d.default,{style:{fontSize:10,fontFamily:"monospace"},children:["Email: ",null!=n&&n.email?"YES":"NO"," | Phone: ",null!=n&&n.phoneNumber?"YES":"NO"," | Line: ",null!=n&&n.lineId?"YES":"NO"]}),(0,b.jsxs)(d.default,{style:{fontSize:10,fontFamily:"monospace"},children:["CheckIn: ",v?"TRUE":"FALSE"," | Token: ",Y?"YES":"NO"]})]})]}),(0,b.jsx)(h.default,{visible:X,transparent:!0,animationType:"slide",onRequestClose:function(){return Z(!1)},children:(0,b.jsx)(O.default,{behavior:"ios"===y.default.OS?"padding":"height",style:I.modalOverlay,children:(0,b.jsxs)(i.default,{style:I.modalContent,children:[(0,b.jsxs)(i.default,{style:I.modalHeader,children:[(0,b.jsx)(d.default,{style:I.modalTitle,children:"è¨ªå®¢å¿«é€Ÿç°½åˆ°"}),(0,b.jsx)(f.default,{onPress:function(){return Z(!1)},style:I.closeButton,children:(0,b.jsx)(d.default,{style:I.closeButtonText,children:"âœ•"})})]}),(0,b.jsx)(d.default,{style:I.modalSubtitle,children:"è«‹è¼¸å…¥æ‚¨çš„æ‰‹æ©Ÿè™Ÿç¢¼ä»¥ç¶å®šèº«ä»½ã€‚\\nåƒ…éœ€è¼¸å…¥ä¸€æ¬¡ï¼Œç³»çµ±å°‡è‡ªå‹•è¨˜éŒ„ã€‚"}),(0,b.jsx)(d.default,{style:I.inputLabel,children:"æ‰‹æ©Ÿè™Ÿç¢¼ (å¿…å¡«)"}),(0,b.jsx)(g.default,{style:I.guestInput,placeholder:"ä¾‹ï¼š0912345678",placeholderTextColor:p.COLORS.textLight,value:G,onChangeText:D,keyboardType:"phone-pad"}),(0,b.jsx)(d.default,{style:I.inputLabel,children:"æ‚¨çš„ç¨±å‘¼ (é¸å¡«)"}),(0,b.jsx)(g.default,{style:I.guestInput,placeholder:"ä¾‹ï¼šé™³å…ˆç”Ÿ/å°å§",placeholderTextColor:p.COLORS.textLight,value:H,onChangeText:U}),(0,b.jsx)(f.default,{style:I.guestButton,onPress:re,disabled:z,children:z?(0,b.jsx)(d.default,{style:I.guestButtonText,children:"è™•ç†ä¸­..."}):(0,b.jsx)(d.default,{style:I.guestButtonText,children:"ç¢ºèªä¸¦ç°½åˆ°"})})]})})})]})})}}}]);